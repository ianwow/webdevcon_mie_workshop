{"remainingRequest":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/babel-loader/lib/index.js!/Users/ianwow/development/aws-content-analysis/source/website/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ianwow/development/aws-content-analysis/source/website/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ianwow/development/aws-content-analysis/source/website/src/views/Collection.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ianwow/development/aws-content-analysis/source/website/src/views/Collection.vue","mtime":1637610292889},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/cache-loader/dist/cjs.js","mtime":1633407346687},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/babel-loader/lib/index.js","mtime":1633407348173},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/cache-loader/dist/cjs.js","mtime":1633407346687},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/vue-loader/lib/index.js","mtime":1633407348650}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9Vc2Vycy9pYW53b3cvZGV2ZWxvcG1lbnQvYXdzLWNvbnRlbnQtYW5hbHlzaXMvc291cmNlL3dlYnNpdGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwppbXBvcnQgX3R5cGVvZiBmcm9tICIvVXNlcnMvaWFud293L2RldmVsb3BtZW50L2F3cy1jb250ZW50LWFuYWx5c2lzL3NvdXJjZS93ZWJzaXRlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2lhbndvdy9kZXZlbG9wbWVudC9hd3MtY29udGVudC1hbmFseXNpcy9zb3VyY2Uvd2Vic2l0ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEhlYWRlciBmcm9tICdAL2NvbXBvbmVudHMvSGVhZGVyLnZ1ZSc7CmltcG9ydCBWaWRlb1RodW1ibmFpbCBmcm9tICdAL2NvbXBvbmVudHMvVmlkZW9UaHVtYm5haWwudnVlJzsKaW1wb3J0IExvYWRpbmcgZnJvbSAnQC9jb21wb25lbnRzL0xvYWRpbmcudnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJSdW4iLAogIGNvbXBvbmVudHM6IHsKICAgIEhlYWRlcjogSGVhZGVyLAogICAgTG9hZGluZzogTG9hZGluZywKICAgIFZpZGVvVGh1bWJuYWlsOiBWaWRlb1RodW1ibmFpbAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3dFbGFzdGljU2VhcmNoQWxlcnQ6IGZhbHNlLAogICAgICBzaG93RGF0YXBsYW5lQWxlcnQ6IGZhbHNlLAogICAgICBzaG93RGVsZXRlZEFsZXJ0OiAwLAogICAgICBub0Fzc2V0czogbnVsbCwKICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgIHBlclBhZ2U6IDEwLAogICAgICBpc0J1c3k6IGZhbHNlLAogICAgICB1c2VyX2RlZmluZWRfcXVlcnk6ICIiLAogICAgICBhc3NldF9saXN0OiBbXSwKICAgICAgc29ydEJ5OiAnQ3JlYXRlZCcsCiAgICAgIHNvcnREZXNjOiB0cnVlLAogICAgICBmaWVsZHM6IFt7CiAgICAgICAgJ1RodW1ibmFpbCc6IHsKICAgICAgICAgIGxhYmVsOiAiVGh1bWJuYWlsIiwKICAgICAgICAgIHNvcnRhYmxlOiBmYWxzZQogICAgICAgIH0KICAgICAgfSwgewogICAgICAgICdGaWxlbmFtZSc6IHsKICAgICAgICAgIGxhYmVsOiAiRmlsZSBOYW1lIiwKICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgICAgdGRDbGFzczogWyJ0YWJsZVdvcmRXcmFwIl0KICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICAnc3RhdHVzJzogewogICAgICAgICAgbGFiZWw6ICJTdGF0dXMiLAogICAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgICB0ZENsYXNzOiBbInRhYmxlV29yZFdyYXAiXQogICAgICAgIH0KICAgICAgfSwgewogICAgICAgICdhc3NldF9pZCc6IHsKICAgICAgICAgIGxhYmVsOiAnQXNzZXQgSUQnLAogICAgICAgICAgc29ydGFibGU6IGZhbHNlLAogICAgICAgICAgdGRDbGFzczogWyJ0YWJsZVdvcmRXcmFwIl0KICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICAnQ3JlYXRlZCc6IHsKICAgICAgICAgIGxhYmVsOiAiQ3JlYXRlZCIsCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICAgIHRkQ2xhc3M6IFsidGFibGVXb3JkV3JhcCJdCiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAgJ0FjdGlvbnMnOiB7CiAgICAgICAgICBsYWJlbDogJ0FjdGlvbnMnLAogICAgICAgICAgc29ydGFibGU6IGZhbHNlCiAgICAgICAgfQogICAgICB9XQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICB0b3RhbFJvd3M6IGZ1bmN0aW9uIHRvdGFsUm93cygpIHsKICAgICAgcmV0dXJuIHRoaXMuYXNzZXRfbGlzdC5sZW5ndGg7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5pc0J1c3kgPSB0cnVlOwogICAgdGhpcy5yZXRyaWV2ZUFuZEZvcm1hdEFzc3NldHMoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9wZW5XaW5kb3c6IGZ1bmN0aW9uIG9wZW5XaW5kb3codXJsKSB7CiAgICAgIHdpbmRvdy5vcGVuKHVybCwgIl9ibGFuayIsICJub29wZW5lcixub3JlZmVyZXIiKTsKICAgIH0sCiAgICBkZWxldGVBc3NldDogZnVuY3Rpb24gZGVsZXRlQXNzZXQoYXNzZXRJZCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgYXBpTmFtZSwgcGF0aCwgcmVxdWVzdE9wdHM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgYXBpTmFtZSA9ICdtaWVEYXRhcGxhbmVBcGknOwogICAgICAgICAgICAgICAgcGF0aCA9ICdtZXRhZGF0YS8nICsgYXNzZXRJZDsKICAgICAgICAgICAgICAgIHJlcXVlc3RPcHRzID0gewogICAgICAgICAgICAgICAgICByZXNwb25zZTogdHJ1ZQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAzOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuJEFtcGxpZnkuQVBJLmRlbChhcGlOYW1lLCBwYXRoLCByZXF1ZXN0T3B0cyk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF90aGlzLnNob3dEZWxldGVkQWxlcnQgPSA1OwogICAgICAgICAgICAgICAgX3RoaXMuYXNzZXRfbGlzdCA9IFtdOwoKICAgICAgICAgICAgICAgIF90aGlzLnJldHJpZXZlQW5kRm9ybWF0QXNzc2V0cygpOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDExOwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgzKTsKICAgICAgICAgICAgICAgIF90aGlzLnNob3dEYXRhcGxhbmVBbGVydCA9IHRydWU7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfY29udGV4dC50MCk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzMsIDExXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBlbGFzdGljc2VhcmNoUXVlcnk6IGZ1bmN0aW9uIGVsYXN0aWNzZWFyY2hRdWVyeShxdWVyeSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBhcGlOYW1lLCBwYXRoLCBhcGlQYXJhbXMsIHJlc3BvbnNlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBhcGlOYW1lID0gJ2NvbnRlbnRBbmFseXNpc0VsYXN0aWNzZWFyY2gnOwogICAgICAgICAgICAgICAgcGF0aCA9ICcvX3NlYXJjaCc7CiAgICAgICAgICAgICAgICBhcGlQYXJhbXMgPSB7CiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGJvZHk6IHsKICAgICAgICAgICAgICAgICAgICAiYWdncyI6IHsKICAgICAgICAgICAgICAgICAgICAgICJkaXN0aW5jdF9hc3NldHMiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICJ0ZXJtcyI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAiZmllbGQiOiAiQXNzZXRJZC5rZXl3b3JkIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAic2l6ZSI6IDEwMDAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIHF1ZXJ5U3RyaW5nUGFyYW1ldGVyczogewogICAgICAgICAgICAgICAgICAgICdxJzogcXVlcnksCiAgICAgICAgICAgICAgICAgICAgJ19zb3VyY2UnOiAnQXNzZXRJZCcKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuJEFtcGxpZnkuQVBJLnBvc3QoYXBpTmFtZSwgcGF0aCwgYXBpUGFyYW1zKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMyLnNob3dFbGFzdGljU2VhcmNoQWxlcnQgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX3RoaXMyLm5vQXNzZXRzID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0Mi5zZW50KTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNlYXJjaENvbGxlY3Rpb246IGZ1bmN0aW9uIHNlYXJjaENvbGxlY3Rpb24oKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIHF1ZXJ5LCBlbGFzdGljRGF0YSwgYXNzZXRzLCBidWNrZXRzLCBpLCBsZW4sIGFzc2V0SWQsIGFzc2V0SW5mbzsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMzLm5vU2VhcmNoUmVzdWx0cyA9IGZhbHNlOwogICAgICAgICAgICAgICAgX3RoaXMzLmlzQnVzeSA9IHRydWU7CiAgICAgICAgICAgICAgICBxdWVyeSA9IF90aGlzMy51c2VyX2RlZmluZWRfcXVlcnk7IC8vIGlmIHNlYXJjaCBpcyBlbXB0eSBzdHJpbmcgdGhlbiBnZXQgYXNzZXQgbGlzdCBmcm9tIGRhdGFwbGFuZSBpbnN0ZWFkIG9mIEVsYXN0aWNzZWFyY2guCgogICAgICAgICAgICAgICAgaWYgKCEocXVlcnkgPT09ICIiKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczMuc2hvd0VsYXN0aWNTZWFyY2hBbGVydCA9IGZhbHNlOwogICAgICAgICAgICAgICAgX3RoaXMzLmFzc2V0X2xpc3QgPSBbXTsKCiAgICAgICAgICAgICAgICBfdGhpczMucmV0cmlldmVBbmRGb3JtYXRBc3NzZXRzKCk7CgogICAgICAgICAgICAgICAgX3RoaXMzLmlzQnVzeSA9IGZhbHNlOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzNDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuZWxhc3RpY3NlYXJjaFF1ZXJ5KHF1ZXJ5KTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIGVsYXN0aWNEYXRhID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCEoZWxhc3RpY0RhdGEuaGl0cy50b3RhbCA9PT0gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxOTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gdGhlIHNlYXJjaCByZXR1cm5lZCBubyBkYXRhCiAgICAgICAgICAgICAgICBfdGhpczMuYXNzZXRfbGlzdCA9IFtdOwogICAgICAgICAgICAgICAgX3RoaXMzLm5vU2VhcmNoUmVzdWx0cyA9IHRydWU7CiAgICAgICAgICAgICAgICBfdGhpczMuaXNCdXN5ID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM0OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICBhc3NldHMgPSBbXTsKICAgICAgICAgICAgICAgIF90aGlzMy5hc3NldF9saXN0ID0gW107CiAgICAgICAgICAgICAgICBfdGhpczMubm9TZWFyY2hSZXN1bHRzID0gZmFsc2U7CiAgICAgICAgICAgICAgICBidWNrZXRzID0gZWxhc3RpY0RhdGEuYWdncmVnYXRpb25zLmRpc3RpbmN0X2Fzc2V0cy5idWNrZXRzOwogICAgICAgICAgICAgICAgaSA9IDAsIGxlbiA9IGJ1Y2tldHMubGVuZ3RoOwoKICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgICAgaWYgKCEoaSA8IGxlbikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgYXNzZXRJZCA9IGJ1Y2tldHNbaV0ua2V5OwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyODsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuZ2V0QXNzZXRJbmZvcm1hdGlvbihhc3NldElkKTsKCiAgICAgICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgICAgIGFzc2V0SW5mbyA9IF9jb250ZXh0My5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChhc3NldEluZm8gIT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgYXNzZXRzLnB1c2goYXNzZXRJbmZvKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAzMDoKICAgICAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjQ7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAzMzoKICAgICAgICAgICAgICAgIGlmIChhc3NldHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMy5ub1NlYXJjaFJlc3VsdHMgPSB0cnVlOwogICAgICAgICAgICAgICAgICBfdGhpczMuaXNCdXN5ID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpczMucHVzaEFzc2V0c1RvVGFibGUoYXNzZXRzKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMy5pc0J1c3kgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAzNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldEFzc2V0V29ya2Zsb3dTdGF0dXM6IGZ1bmN0aW9uIGdldEFzc2V0V29ya2Zsb3dTdGF0dXMoYXNzZXRJZCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHZhciBhcGlOYW1lLCBwYXRoLCByZXF1ZXN0T3B0cywgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGFwaU5hbWUgPSAnbWllV29ya2Zsb3dBcGknOwogICAgICAgICAgICAgICAgcGF0aCA9ICd3b3JrZmxvdy9leGVjdXRpb24vYXNzZXQvJyArIGFzc2V0SWQ7CiAgICAgICAgICAgICAgICByZXF1ZXN0T3B0cyA9IHsKICAgICAgICAgICAgICAgICAgcmVzcG9uc2U6IHRydWUKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDM7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM0LiRBbXBsaWZ5LkFQSS5nZXQoYXBpTmFtZSwgcGF0aCwgcmVxdWVzdE9wdHMpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlLmRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSAxMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC50MCA9IF9jb250ZXh0NFsiY2F0Y2giXSgzKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0NC50MCk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQsIG51bGwsIFtbMywgMTBdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldEFzc2V0VGh1bWJuYWlsOiBmdW5jdGlvbiBnZXRBc3NldFRodW1ibmFpbChidWNrZXQsIHMzS2V5KSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIGRhdGEsIGFwaU5hbWUsIHBhdGgsIHJlcXVlc3RPcHRzLCByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgIlMzQnVja2V0IjogYnVja2V0LAogICAgICAgICAgICAgICAgICAiUzNLZXkiOiBzM0tleQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGFwaU5hbWUgPSAnbWllRGF0YXBsYW5lQXBpJzsKICAgICAgICAgICAgICAgIHBhdGggPSAnZG93bmxvYWQnOwogICAgICAgICAgICAgICAgcmVxdWVzdE9wdHMgPSB7CiAgICAgICAgICAgICAgICAgIGJvZHk6IGRhdGEsCiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlOiB0cnVlLAogICAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6ICd0ZXh0JwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5wcmV2ID0gNDsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczUuJEFtcGxpZnkuQVBJLnBvc3QoYXBpTmFtZSwgcGF0aCwgcmVxdWVzdE9wdHMpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlLmRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSAxMTsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS50MCA9IF9jb250ZXh0NVsiY2F0Y2giXSg0KTsKICAgICAgICAgICAgICAgIF90aGlzNS5zaG93RGF0YXBsYW5lQWxlcnQgPSB0cnVlOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coX2NvbnRleHQ1LnQwKTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSwgbnVsbCwgW1s0LCAxMV1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZ2V0QXNzZXRJbmZvcm1hdGlvbjogZnVuY3Rpb24gZ2V0QXNzZXRJbmZvcm1hdGlvbihhc3NldElkKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgdmFyIGFwaU5hbWUsIHBhdGgsIHJlcXVlc3RPcHRzLCByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgYXBpTmFtZSA9ICdtaWVEYXRhcGxhbmVBcGknOwogICAgICAgICAgICAgICAgcGF0aCA9ICdtZXRhZGF0YS8nICsgYXNzZXRJZDsKICAgICAgICAgICAgICAgIHJlcXVlc3RPcHRzID0gewogICAgICAgICAgICAgICAgICByZXNwb25zZTogdHJ1ZQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5wcmV2ID0gMzsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczYuJEFtcGxpZnkuQVBJLmdldChhcGlOYW1lLCBwYXRoLCByZXF1ZXN0T3B0cyk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQ2LnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UuZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfY29udGV4dDYucHJldiA9IDEwOwogICAgICAgICAgICAgICAgX2NvbnRleHQ2LnQwID0gX2NvbnRleHQ2WyJjYXRjaCJdKDMpOwogICAgICAgICAgICAgICAgX3RoaXM2LnNob3dEYXRhcGxhbmVBbGVydCA9IHRydWU7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfY29udGV4dDYudDApOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU2LCBudWxsLCBbWzMsIDEwXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBmZXRjaEFzc2V0czogZnVuY3Rpb24gZmV0Y2hBc3NldHMoKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcoKSB7CiAgICAgICAgdmFyIGFwaU5hbWUsIHBhdGgsIHJlcXVlc3RPcHRzLCByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgYXBpTmFtZSA9ICdtaWVEYXRhcGxhbmVBcGknOwogICAgICAgICAgICAgICAgcGF0aCA9ICdtZXRhZGF0YSc7CiAgICAgICAgICAgICAgICByZXF1ZXN0T3B0cyA9IHsKICAgICAgICAgICAgICAgICAgcmVzcG9uc2U6IHRydWUKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dDcucHJldiA9IDM7CiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM3LiRBbXBsaWZ5LkFQSS5nZXQoYXBpTmFtZSwgcGF0aCwgcmVxdWVzdE9wdHMpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Ny5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlLmRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ3LnByZXYgPSAxMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny50MCA9IF9jb250ZXh0N1siY2F0Y2giXSgzKTsKICAgICAgICAgICAgICAgIF90aGlzNy5zaG93RGF0YXBsYW5lQWxlcnQgPSB0cnVlOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coX2NvbnRleHQ3LnQwKTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNywgbnVsbCwgW1szLCAxMF1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgcHVzaEFzc2V0c1RvVGFibGU6IGZ1bmN0aW9uIHB1c2hBc3NldHNUb1RhYmxlKGFzc2V0cykgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KCkgewogICAgICAgIHZhciBpLCBsZW4sIGFzc2V0SWQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IGFzc2V0cy5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgICAgICAgICBpZiAoX3R5cGVvZihhc3NldHNbaV0pID09PSAnb2JqZWN0JykgewogICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBhc3NldCBsaXN0IGlzIGNvbWluZyBmcm9tIEVsYXN0aWNzZWFyY2gsIHdlIGdldCB0aGUgYXNzZXRJZCBsaWtlIHRoaXM6CiAgICAgICAgICAgICAgICAgICAgYXNzZXRJZCA9IGFzc2V0c1tpXS5hc3NldF9pZDsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgYXNzZXQgbGlzdCBpcyBjb21pbmcgZnJvbSB0aGUgZGF0YXBsYW5lYXBpLCB3ZSBnZXQgdGhlIGFzc2V0SWQgbGlrZSB0aGlzOgogICAgICAgICAgICAgICAgICAgIGFzc2V0SWQgPSBhc3NldHNbaV07CiAgICAgICAgICAgICAgICAgIH0gLy8gSW52b2tlIGFuIGFzeW5jaHJvbm91cyB0YXNrIHRvIGFkZCBhc3NldHMgdG8gdGhlIHRhYmxlIGluIHBhcmFsbGVsIHNvIHRoZSB0YWJsZSB1cGRhdGVzCiAgICAgICAgICAgICAgICAgIC8vIGFzIGZhc3QgYXMgcG9zc2libGUuIEZvciBsYXJnZSBtZWRpYSBjb2xsZWN0aW9ucyB0aGlzIG1heSB0YWtlIHNldmVyYWwgc2Vjb25kcy4KCgogICAgICAgICAgICAgICAgICBfdGhpczgucHVzaEFzc2V0VG9UYWJsZShhc3NldElkKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU4KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgcHVzaEFzc2V0VG9UYWJsZTogZnVuY3Rpb24gcHVzaEFzc2V0VG9UYWJsZShhc3NldElkKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkoKSB7CiAgICAgICAgdmFyIGFzc2V0SW5mbywgY3JlYXRlZCwgbWV0YWRhdGFfZm9sZGVyLCBzb3VyY2VfYnVja2V0LCBzb3VyY2Vfa2V5LCBzM1VyaSwgZmlsZW5hbWUsIHRodW1ibmFpbFMzS2V5LCB0aHVtYm5haWxTM0J1Y2tldCwgc3VwcG9ydGVkX2ltYWdlX3R5cGVzLCBtZWRpYV90eXBlLCBfeWllbGQkUHJvbWlzZSRhbGwsIF95aWVsZCRQcm9taXNlJGFsbDIsIHRodW1ibmFpbCwgd29ya2Zsb3dTdGF0dXM7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOSQoX2NvbnRleHQ5KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM5LmdldEFzc2V0SW5mb3JtYXRpb24oYXNzZXRJZCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIGFzc2V0SW5mbyA9IF9jb250ZXh0OS5zZW50OwogICAgICAgICAgICAgICAgY3JlYXRlZCA9IG5ldyBEYXRlKDApOwogICAgICAgICAgICAgICAgY3JlYXRlZC5zZXRVVENTZWNvbmRzKGFzc2V0SW5mby5yZXN1bHRzLkNyZWF0ZWQpOwogICAgICAgICAgICAgICAgbWV0YWRhdGFfZm9sZGVyID0gIi9wcml2YXRlL2Fzc2V0cy8iICsgYXNzZXRJZDsKICAgICAgICAgICAgICAgIHNvdXJjZV9idWNrZXQgPSBhc3NldEluZm8ucmVzdWx0cy5TM0J1Y2tldDsKICAgICAgICAgICAgICAgIHNvdXJjZV9rZXkgPSBhc3NldEluZm8ucmVzdWx0cy5TM0tleTsKICAgICAgICAgICAgICAgIHMzVXJpID0gJ3MzOi8vJyArIF90aGlzOS5EQVRBUExBTkVfQlVDS0VUICsgJy8nICsgbWV0YWRhdGFfZm9sZGVyOwogICAgICAgICAgICAgICAgZmlsZW5hbWUgPSBzb3VyY2Vfa2V5LnNwbGl0KCIvIikucG9wKCk7IC8vIFRoZSB0aHVtYm5haWwgaXMgY3JlYXRlZCBieSBNZWRpYSBDb252ZXJ0LCBzZWU6CiAgICAgICAgICAgICAgICAvLyBzb3VyY2Uvb3BlcmF0b3JzL3RodW1ibmFpbC9zdGFydF90aHVtYm5haWwucHkKCiAgICAgICAgICAgICAgICB0aHVtYm5haWxTM0tleSA9ICdwcml2YXRlL2Fzc2V0cy8nICsgYXNzZXRJZCArICcvJyArIGZpbGVuYW1lLnN1YnN0cmluZygwLCBmaWxlbmFtZS5sYXN0SW5kZXhPZigiLiIpKSArICdfdGh1bWJuYWlsLjAwMDAwMDEuanBnJzsKICAgICAgICAgICAgICAgIHRodW1ibmFpbFMzQnVja2V0ID0gX3RoaXM5LkRBVEFQTEFORV9CVUNLRVQ7IC8vIElmIGl0J3MgYW4gaW1hZ2UgdGhlbiBNZWRpYSBDb252ZXJ0IHdvbid0IGNyZWF0ZSBhIHRodW1ibmFpbC4KICAgICAgICAgICAgICAgIC8vIEluIHRoYXQgY2FzZSB3ZSB1c2UgdGhlIHVwbG9hZGVkIGltYWdlIGFzIHRoZSB0aHVtYm5haWwuCgogICAgICAgICAgICAgICAgc3VwcG9ydGVkX2ltYWdlX3R5cGVzID0gWyIuanBnIiwgIi5qcGVnIiwgIi50aWYiLCAiLnRpZmYiLCAiLnBuZyIsICIuYXBuZyIsICIuZ2lmIiwgIi5ibXAiLCAiLnMgZ3ZnIl07CiAgICAgICAgICAgICAgICBtZWRpYV90eXBlID0gZmlsZW5hbWUuc3Vic3RyaW5nKGZpbGVuYW1lLmxhc3RJbmRleE9mKCIuIikpLnRvTG93ZXJDYXNlKCk7CgogICAgICAgICAgICAgICAgaWYgKHN1cHBvcnRlZF9pbWFnZV90eXBlcy5pbmNsdWRlcyhtZWRpYV90eXBlKSkgewogICAgICAgICAgICAgICAgICAvLyB1c2UgdGhlIHVwbG9hZGVkIGltYWdlIGFzIGEgdGh1bWJuYWlsCiAgICAgICAgICAgICAgICAgIHRodW1ibmFpbFMzS2V5ID0gc291cmNlX2tleTsKICAgICAgICAgICAgICAgICAgdGh1bWJuYWlsUzNCdWNrZXQgPSBzb3VyY2VfYnVja2V0OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW190aGlzOS5nZXRBc3NldFRodW1ibmFpbCh0aHVtYm5haWxTM0J1Y2tldCwgdGh1bWJuYWlsUzNLZXkpLCBfdGhpczkuZ2V0QXNzZXRXb3JrZmxvd1N0YXR1cyhhc3NldElkKV0pOwoKICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgX3lpZWxkJFByb21pc2UkYWxsID0gX2NvbnRleHQ5LnNlbnQ7CiAgICAgICAgICAgICAgICBfeWllbGQkUHJvbWlzZSRhbGwyID0gX3NsaWNlZFRvQXJyYXkoX3lpZWxkJFByb21pc2UkYWxsLCAyKTsKICAgICAgICAgICAgICAgIHRodW1ibmFpbCA9IF95aWVsZCRQcm9taXNlJGFsbDJbMF07CiAgICAgICAgICAgICAgICB3b3JrZmxvd1N0YXR1cyA9IF95aWVsZCRQcm9taXNlJGFsbDJbMV07CgogICAgICAgICAgICAgICAgaWYgKHdvcmtmbG93U3RhdHVzWzBdICYmIHRodW1ibmFpbCkgewogICAgICAgICAgICAgICAgICBfdGhpczkuYXNzZXRfbGlzdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBhc3NldF9pZDogYXNzZXRJZCwKICAgICAgICAgICAgICAgICAgICBDcmVhdGVkOiBjcmVhdGVkLAogICAgICAgICAgICAgICAgICAgIEZpbGVuYW1lOiBmaWxlbmFtZSwKICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHdvcmtmbG93U3RhdHVzWzBdLlN0YXR1cywKICAgICAgICAgICAgICAgICAgICBzdGF0ZV9tYWNoaW5lX2NvbnNvbGVfbGluazogImh0dHBzOi8vIiArIF90aGlzOS5BV1NfUkVHSU9OICsgIi5jb25zb2xlLmF3cy5hbWF6b24uY29tL3N0YXRlcy9ob21lP3JlZ2lvbj0iICsgX3RoaXM5LkFXU19SRUdJT04gKyAiIy9leGVjdXRpb25zL2RldGFpbHMvIiArIHdvcmtmbG93U3RhdHVzWzBdLlN0YXRlTWFjaGluZUV4ZWN1dGlvbkFybiwKICAgICAgICAgICAgICAgICAgICBzM191cmk6IHMzVXJpLAogICAgICAgICAgICAgICAgICAgIHNpZ25lZFVybDogdGh1bWJuYWlsLAogICAgICAgICAgICAgICAgICAgIHRodW1ibmFpbElEOiAnXycgKyBhc3NldElkLAogICAgICAgICAgICAgICAgICAgIFRodW1ibmFpbDogJycsCiAgICAgICAgICAgICAgICAgICAgQWN0aW9uczogJ1J1bicKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTkpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICByZXRyaWV2ZUFuZEZvcm1hdEFzc3NldHM6IGZ1bmN0aW9uIHJldHJpZXZlQW5kRm9ybWF0QXNzc2V0cygpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKCkgewogICAgICAgIHZhciBkYXRhLCBhc3NldHM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEwLnByZXYgPSBfY29udGV4dDEwLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTAuZmV0Y2hBc3NldHMoKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgZGF0YSA9IF9jb250ZXh0MTAuc2VudDsKICAgICAgICAgICAgICAgIGFzc2V0cyA9IGRhdGEuYXNzZXRzOwoKICAgICAgICAgICAgICAgIGlmIChhc3NldHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTAubm9Bc3NldHMgPSB0cnVlOwogICAgICAgICAgICAgICAgICBfdGhpczEwLm5vU2VhcmNoUmVzdWx0cyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICBfdGhpczEwLmlzQnVzeSA9IGZhbHNlOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXMxMC5ub0Fzc2V0cyA9IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgX3RoaXMxMC5wdXNoQXNzZXRzVG9UYWJsZShhc3NldHMpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMxMC5pc0J1c3kgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTApOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Collection.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div class=\"headerTextBackground\">\n      <Header :is-collection-active=\"true\" />\n      <b-container fluid>\n        <b-alert\n          v-model=\"showElasticSearchAlert\"\n          variant=\"danger\"\n          dismissible\n        >\n          Elasticsearch error. Please check browser and elasticsearch access logs.\n        </b-alert>\n        <b-alert\n          v-model=\"showDataplaneAlert\"\n          variant=\"danger\"\n          dismissible\n        >\n          Dataplane Error. Please check browser and dataplane logs.\n        </b-alert>\n        <b-alert\n          v-model=\"showDeletedAlert\"\n          variant=\"success\"\n          dismissible\n          fade\n        >\n          Successfully Deleted Asset\n        </b-alert>\n        <b-row align-h=\"center\">\n          <h1>Media Collection</h1>\n        </b-row>\n        <b-row\n          align-h=\"center\"\n          class=\"tagline\"\n        >\n          <b>Discover insights in your media by searching for keywords, objects, or even people.</b>\n        </b-row>\n        <b-row\n          class=\"my-1\"\n          align-v=\"center\"\n          align-h=\"center\"\n        >\n          <b-col sm=\"5\">\n            <input\n              v-model=\"user_defined_query\"\n              type=\"text\"\n              placeholder=\"Search Collection...\"\n              @keyup.enter=\"searchCollection\"\n            >\n          </b-col>\n          <b-col sm=\"1\">\n            <b-button\n              size=\"lg\"\n              @click=\"searchCollection\"\n            >\n              Search\n            </b-button>\n          </b-col>\n        </b-row>\n      </b-container>\n    </div>\n    <b-container\n      fluid\n      class=\"resultsTable\"\n    >\n      <b-row>\n        <b-col>\n          <div>\n            <div class=\"column\">\n              <b-row class=\"my-1\">\n                <b-col>\n                  <b-table\n                    striped\n                    hover\n                    fixed\n                    responsive\n                    show-empty\n                    :fields=\"fields\"\n                    :items=\"asset_list\"\n                    :sort-by.sync=\"sortBy\"\n                    :sort-desc.sync=\"sortDesc\"\n                    :current-page=\"currentPage\"\n                    :per-page=\"perPage\"\n                  >\n                    <template #cell(Thumbnail)=\"data\">\n                      <VideoThumbnail\n                        :thumbnail-i-d=\"data.item.thumbnailID\"\n                        :signed-url=\"data.item.signedUrl\"\n                      />\n                    </template>\n                    <template #cell(Created)=\"data\">\n                      {{ data.item.Created.toLocaleDateString() }}<br>\n                      {{ data.item.Created.toLocaleTimeString() }}\n                    </template>\n                    <template #cell(status)=\"data\">\n                      <!-- open link in new tab -->\n                      <a v-if=\"data.item.status !== 'Queued'\" href=\"\" @click.stop.prevent=\"openWindow(data.item.state_machine_console_link)\">{{ data.item.status }}</a>\n                      <div v-if=\"data.item.status === 'Queued'\">\n                        {{ data.item.status }}\n                      </div>\n                    </template>\n                    <template #cell(Actions)=\"data\">\n                      <b-link\n                        :href=\"(`/analysis/${data.item.asset_id}`)\"\n                      >\n                        Analyze\n                      </b-link>\n                      <br>\n                      <b-link\n                        class=\"text-danger\"\n                        @click=\"deleteAsset(`${data.item.asset_id}`)\"\n                      >\n                        Delete\n                      </b-link>\n                    </template>\n                  </b-table>\n                  <div\n                    v-if=\"noAssets\"\n                  >\n                    <p>\n                      Looks like no assets have been uploaded! Try uploading <a href=\"upload\" rel=\"noopener noreferrer\">here</a>.\n                    </p>\n                  </div>\n                  <div\n                    v-if=\"isBusy\"\n                    class=\"wrapper\"\n                  >\n                    <Loading v-if=\"isBusy\" />\n                    <p class=\"text-muted\">\n                      (Loading...)\n                    </p>\n                  </div>\n                </b-col>\n              </b-row>\n              <b-row align-h=\"center\">\n                <b-pagination\n                  v-model=\"currentPage\"\n                  :total-rows=\"totalRows\"\n                  :per-page=\"perPage\"\n                  class=\"my-0\"\n                />\n              </b-row>\n            </div>\n          </div>\n        </b-col>\n      </b-row>\n    </b-container>\n  </div>\n</template>\n\n<script>\n  import Header from '@/components/Header.vue'\n  import VideoThumbnail from '@/components/VideoThumbnail.vue'\n  import Loading from '@/components/Loading.vue'\n\n  export default {\n    name: \"Run\",\n    components: {\n      Header,\n      Loading,\n      VideoThumbnail\n    },\n    data() {\n      return {\n        showElasticSearchAlert: false,\n        showDataplaneAlert: false,\n        showDeletedAlert: 0,\n        noAssets: null,\n        currentPage: 1,\n        perPage: 10,\n        isBusy: false,\n        user_defined_query: \"\",\n        asset_list: [],\n        sortBy: 'Created',\n        sortDesc: true,\n        fields: [\n            {\n              'Thumbnail': {\n              label: \"Thumbnail\",\n              sortable: false\n              }\n            },\n            {\n              'Filename': {\n              label: \"File Name\",\n              sortable: true,\n              tdClass: [\"tableWordWrap\"]\n              }\n            },\n            {\n              'status': {\n              label: \"Status\",\n              sortable: true,\n              tdClass: [\"tableWordWrap\"]\n              }\n            },\n            {\n            'asset_id': {\n              label: 'Asset ID',\n              sortable: false,\n              tdClass: [\"tableWordWrap\"]\n              }\n            },\n            {\n              'Created': {\n              label: \"Created\",\n              sortable: true,\n              tdClass: [\"tableWordWrap\"]\n              }\n            },\n            {\n              'Actions': {\n              label: 'Actions',\n              sortable: false\n              }\n            }\n        ]\n      }\n    },\n    computed: {\n      totalRows() {\n        return this.asset_list.length\n      }\n    },\n    created: function () {\n      this.isBusy = true;\n      this.retrieveAndFormatAsssets()\n    },\n    methods: {\n      openWindow: function (url) {\n        window.open(url, \"_blank\", \"noopener,noreferer\");\n      },\n      async deleteAsset(assetId) {\n        let apiName = 'mieDataplaneApi'\n        let path = 'metadata/' + assetId\n        let requestOpts = {\n          response: true,\n        };\n        try {\n          await this.$Amplify.API.del(apiName, path, requestOpts);\n          this.showDeletedAlert = 5;\n          this.asset_list = [];\n          this.retrieveAndFormatAsssets()\n        } catch (error) {\n          this.showDataplaneAlert = true\n          console.log(error)\n        }\n      },\n      async elasticsearchQuery (query) {\n            let apiName = 'contentAnalysisElasticsearch';\n            let path = '/_search';\n            let apiParams = {\n              headers: {'Content-Type': 'application/json'},\n              body: {\n              \"aggs\" : {\n                \"distinct_assets\" : {\n                  \"terms\" : { \"field\" : \"AssetId.keyword\", \"size\" : 10000 }\n                }\n                }\n              },\n              queryStringParameters: {'q': query, '_source': 'AssetId'}\n            };\n            let response = await this.$Amplify.API.post(apiName, path, apiParams);\n            if (!response) {\n              this.showElasticSearchAlert = true\n            }\n            else {\n              this.noAssets = false;\n              return await response;\n        }\n      },\n      async searchCollection () {\n          this.noSearchResults = false;\n          this.isBusy = true;\n          let query = this.user_defined_query;\n          // if search is empty string then get asset list from dataplane instead of Elasticsearch.\n          if (query === \"\") {\n            this.showElasticSearchAlert = false;\n            this.asset_list = [];\n            this.retrieveAndFormatAsssets();\n            this.isBusy = false;\n          }\n          else {\n            // Get the list of assets that contain metadata matching the user-specified search query.\n            let elasticData = await this.elasticsearchQuery(query);\n            if (elasticData.hits.total === 0) {\n              // the search returned no data\n              this.asset_list = [];\n              this.noSearchResults = true;\n              this.isBusy = false;\n            }\n            else {\n              let assets = [];\n              this.asset_list = [];\n              this.noSearchResults = false;\n              let buckets = elasticData.aggregations.distinct_assets.buckets;\n              for (var i = 0, len = buckets.length; i < len; i++) {\n                let assetId = buckets[i].key;\n                let assetInfo = await this.getAssetInformation(assetId);\n                if (assetInfo !== null) {\n                  assets.push(assetInfo)\n                }\n            }\n            if (assets.length === 0) {\n              this.noSearchResults = true;\n              this.isBusy = false\n            }\n            else {\n              this.pushAssetsToTable(assets);\n              this.isBusy = false\n            }\n          }\n        }\n      },\n      async getAssetWorkflowStatus (assetId) {\n        let apiName = 'mieWorkflowApi'\n        let path = 'workflow/execution/asset/' + assetId\n        let requestOpts = {\n          response: true,\n        };\n        try {\n          let response = await this.$Amplify.API.get(apiName, path, requestOpts);\n          return response.data\n        } catch (error) {\n          console.log(error)\n        }\n      },\n      async getAssetThumbnail (bucket, s3Key) {\n        const data = { \"S3Bucket\": bucket, \"S3Key\": s3Key };\n        let apiName = 'mieDataplaneApi'\n        let path = 'download'\n        let requestOpts = {\n          body: data,\n          response: true,\n          responseType: 'text'\n        };\n        try {\n          let response = await this.$Amplify.API.post(apiName, path, requestOpts);\n          return response.data\n        } catch (error) {\n          this.showDataplaneAlert = true\n          console.log(error)\n        }\n      },\n      async getAssetInformation (assetId) {\n        let apiName = 'mieDataplaneApi'\n        let path = 'metadata/' + assetId\n        let requestOpts = {\n          response: true,\n        };\n        try {\n          let response = await this.$Amplify.API.get(apiName, path, requestOpts);\n          return response.data\n        } catch (error) {\n          this.showDataplaneAlert = true\n          console.log(error)\n        }\n      },\n      async fetchAssets () {\n        let apiName = 'mieDataplaneApi'\n        let path = 'metadata'\n        let requestOpts = {\n          response: true,\n        };\n        try {\n          let response = await this.$Amplify.API.get(apiName, path, requestOpts);\n          return response.data\n        } catch (error) {\n          this.showDataplaneAlert = true\n          console.log(error)\n        }\n      },\n      async pushAssetsToTable(assets) {\n        for (var i = 0, len = assets.length; i < len; i++) {\n          var assetId;\n          if (typeof assets[i] === 'object') {\n            // If the asset list is coming from Elasticsearch, we get the assetId like this:\n            assetId = assets[i].asset_id\n          } else {\n            // If the asset list is coming from the dataplaneapi, we get the assetId like this:\n            assetId = assets[i]\n          }\n          // Invoke an asynchronous task to add assets to the table in parallel so the table updates\n          // as fast as possible. For large media collections this may take several seconds.\n          this.pushAssetToTable(assetId)\n        }\n      },\n      async pushAssetToTable (assetId) {\n        const assetInfo = await this.getAssetInformation(assetId);\n        let created = new Date(0);\n        created.setUTCSeconds(assetInfo.results.Created);\n        const metadata_folder = \"/private/assets/\"+assetId\n        const source_bucket = assetInfo.results.S3Bucket;\n        const source_key = assetInfo.results.S3Key;\n        let s3Uri = 's3://' + this.DATAPLANE_BUCKET + '/' + metadata_folder;\n        const filename = source_key.split(\"/\").pop();\n        // The thumbnail is created by Media Convert, see:\n        // source/operators/thumbnail/start_thumbnail.py\n        let thumbnailS3Key = 'private/assets/' + assetId + '/' + filename.substring(0, filename.lastIndexOf(\".\")) + '_thumbnail.0000001.jpg';\n        let thumbnailS3Bucket = this.DATAPLANE_BUCKET\n        // If it's an image then Media Convert won't create a thumbnail.\n        // In that case we use the uploaded image as the thumbnail.\n        const supported_image_types = [\".jpg\", \".jpeg\", \".tif\", \".tiff\", \".png\", \".apng\", \".gif\", \".bmp\", \".s gvg\"];\n        const media_type = filename.substring(filename.lastIndexOf(\".\")).toLowerCase();\n        if (supported_image_types.includes(media_type)) {\n          // use the uploaded image as a thumbnail\n          thumbnailS3Key = source_key;\n          thumbnailS3Bucket = source_bucket;\n        }\n        let [thumbnail, workflowStatus] = await Promise.all([this.getAssetThumbnail(thumbnailS3Bucket, thumbnailS3Key), this.getAssetWorkflowStatus(assetId)]);\n        if (workflowStatus[0] && thumbnail)\n        {\n          this.asset_list.push({\n            asset_id: assetId,\n            Created: created,\n            Filename: filename,\n            status: workflowStatus[0].Status,\n            state_machine_console_link: \"https://\" + this.AWS_REGION + \".console.aws.amazon.com/states/home?region=\" + this.AWS_REGION + \"#/executions/details/\" + workflowStatus[0].StateMachineExecutionArn,\n            s3_uri: s3Uri,\n            signedUrl: thumbnail,\n            thumbnailID: '_' + assetId,\n            Thumbnail: '',\n            Actions: 'Run'\n          })\n        }\n      },\n\n      async retrieveAndFormatAsssets () {\n        let data = await this.fetchAssets();\n        let assets = data.assets;\n        if (assets.length === 0) {\n          this.noAssets = true;\n          this.noSearchResults = false;\n          this.isBusy = false;\n        }\n        else {\n          this.noAssets = false;\n          this.pushAssetsToTable(assets);\n          this.isBusy = false\n        }\n      }\n    }\n  }\n</script>\n\n<style>\n  td {\n    vertical-align: middle;\n  }\n  .headerTextBackground {\n    background-color: #191918;\n    max-width: 100%;\n    height: auto;\n    padding-bottom: 1%;\n  }\n  .resultsTable {\n    padding-top: 1%;\n  }\n  h1 {\n    color: #ED900E;\n  }\n  a {\n    color: #ED900E;\n  }\n  .tagline {\n    color: white\n  }\n  .btn-orange {\n    color: #ED900E\n  }\n  .btn-red {\n    color: red\n  }\n  .tableWordWrap {\n    white-space:normal;\n    word-break:break-all;\n    overflow: hidden;\n    text-overflow:ellipsis;\n  }\n</style>\n"],"sourceRoot":"src/views"}]}