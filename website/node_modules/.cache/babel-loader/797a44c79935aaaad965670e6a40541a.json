{"remainingRequest":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/thread-loader/dist/cjs.js!/Users/ianwow/development/aws-content-analysis/source/website/node_modules/babel-loader/lib/index.js!/Users/ianwow/development/aws-content-analysis/source/website/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ianwow/development/aws-content-analysis/source/website/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ianwow/development/aws-content-analysis/source/website/src/components/Transcript.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ianwow/development/aws-content-analysis/source/website/src/components/Transcript.vue","mtime":1623875433280},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/cache-loader/dist/cjs.js","mtime":1633407346687},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/thread-loader/dist/cjs.js","mtime":1633407346686},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/babel-loader/lib/index.js","mtime":1633407348173},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/cache-loader/dist/cjs.js","mtime":1633407346687},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/vue-loader/lib/index.js","mtime":1633407348650}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9pYW53b3cvZGV2ZWxvcG1lbnQvYXdzLWNvbnRlbnQtYW5hbHlzaXMvc291cmNlL3dlYnNpdGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVHJhbnNjcmlwdCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRyYW5zY3JpcHQ6ICIiLAogICAgICBpc0J1c3k6IGZhbHNlLAogICAgICBvcGVyYXRvcjogInRyYW5zY3JpcHQiLAogICAgICBub1RyYW5zY3JpcHQ6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGlzUHJvZmFuZTogZnVuY3Rpb24gaXNQcm9mYW5lKCkgewogICAgICB2YXIgRmlsdGVyID0gcmVxdWlyZSgnYmFkLXdvcmRzJyk7CgogICAgICB2YXIgcHJvZmFuaXR5RmlsdGVyID0gbmV3IEZpbHRlcih7CiAgICAgICAgcGxhY2VIb2xkZXI6ICdfJwogICAgICB9KTsKICAgICAgcmV0dXJuIHByb2Zhbml0eUZpbHRlci5pc1Byb2ZhbmUodGhpcy50cmFuc2NyaXB0KTsKICAgIH0KICB9LAogIGRlYWN0aXZhdGVkOiBmdW5jdGlvbiBkZWFjdGl2YXRlZCgpIHsKICAgIHRoaXMudHJhbnNjcmlwdCA9ICIiOwogICAgY29uc29sZS5sb2coJ2RlYWN0aXZhdGVkIGNvbXBvbmVudDonLCB0aGlzLm9wZXJhdG9yKTsKICB9LAogIGFjdGl2YXRlZDogZnVuY3Rpb24gYWN0aXZhdGVkKCkgewogICAgY29uc29sZS5sb2coJ2FjdGl2YXRlZCBjb21wb25lbnQ6JywgdGhpcy5vcGVyYXRvcik7CiAgICB0aGlzLmZldGNoQXNzZXREYXRhKCk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgdGhpcy50cmFuc2NyaXB0ID0gJyc7CiAgfSwKICBtZXRob2RzOiB7CiAgICBmZXRjaEFzc2V0RGF0YTogZnVuY3Rpb24gZmV0Y2hBc3NldERhdGEoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBxdWVyeSwgYXBpTmFtZSwgcGF0aCwgYXBpUGFyYW1zLCByZXNwb25zZSwgcmVzdWx0LCBkYXRhLCBpLCBsZW47CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcXVlcnkgPSAnQXNzZXRJZDonICsgX3RoaXMuJHJvdXRlLnBhcmFtcy5hc3NldF9pZCArICcgX2luZGV4Om1pZXZpZGVvdHJhbnNjcmlwdCc7CiAgICAgICAgICAgICAgICBhcGlOYW1lID0gJ2NvbnRlbnRBbmFseXNpc0VsYXN0aWNzZWFyY2gnOwogICAgICAgICAgICAgICAgcGF0aCA9ICcvX3NlYXJjaCc7CiAgICAgICAgICAgICAgICBhcGlQYXJhbXMgPSB7CiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIHF1ZXJ5U3RyaW5nUGFyYW1ldGVyczogewogICAgICAgICAgICAgICAgICAgICdxJzogcXVlcnksCiAgICAgICAgICAgICAgICAgICAgJ2RlZmF1bHRfb3BlcmF0b3InOiAnQU5EJywKICAgICAgICAgICAgICAgICAgICAnc2l6ZSc6IDEwMDAwCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kQW1wbGlmeS5BUEkuZ2V0KGFwaU5hbWUsIHBhdGgsIGFwaVBhcmFtcyk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpcy5zaG93RWxhc3RpY1NlYXJjaEFsZXJ0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGRhdGEgPSByZXN1bHQuaGl0cy5oaXRzOwoKICAgICAgICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICBfdGhpcy5ub1RyYW5zY3JpcHQgPSB0cnVlOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgZm9yIChpID0gMCwgbGVuID0gZGF0YS5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgICAgICAgICAgIGlmICgndHJhbnNjcmlwdCcgaW4gZGF0YVtpXS5fc291cmNlKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpcy50cmFuc2NyaXB0ID0gX3RoaXMudHJhbnNjcmlwdC5jb25jYXQoZGF0YVtpXS5fc291cmNlLnRyYW5zY3JpcHQgKyAiICIpOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXMubm9UcmFuc2NyaXB0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMuaXNCdXN5ID0gZmFsc2U7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Transcript.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,EADA;AAEA,MAAA,MAAA,EAAA,KAFA;AAGA,MAAA,QAAA,EAAA,YAHA;AAIA,MAAA,YAAA,EAAA;AAJA,KAAA;AAMA,GATA;AAUA,EAAA,QAAA,EAAA;AACA,IAAA,SADA,uBACA;AACA,UAAA,MAAA,GAAA,OAAA,CAAA,WAAA,CAAA;;AACA,UAAA,eAAA,GAAA,IAAA,MAAA,CAAA;AAAA,QAAA,WAAA,EAAA;AAAA,OAAA,CAAA;AACA,aAAA,eAAA,CAAA,SAAA,CAAA,KAAA,UAAA,CAAA;AACA;AALA,GAVA;AAiBA,EAAA,WAAA,EAAA,uBAAA;AACA,SAAA,UAAA,GAAA,EAAA;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,wBAAA,EAAA,KAAA,QAAA;AACA,GApBA;AAqBA,EAAA,SAAA,EAAA,qBAAA;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,sBAAA,EAAA,KAAA,QAAA;AACA,SAAA,cAAA;AACA,GAxBA;AAyBA,EAAA,aAAA,EAAA,yBAAA;AACA,SAAA,UAAA,GAAA,EAAA;AACA,GA3BA;AA4BA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,4BACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,KADA,GACA,aAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,QAAA,GAAA,4BADA;AAEA,gBAAA,OAFA,GAEA,8BAFA;AAGA,gBAAA,IAHA,GAGA,UAHA;AAIA,gBAAA,SAJA,GAIA;AACA,kBAAA,OAAA,EAAA;AAAA,oCAAA;AAAA,mBADA;AAEA,kBAAA,qBAAA,EAAA;AAAA,yBAAA,KAAA;AAAA,wCAAA,KAAA;AAAA,4BAAA;AAAA;AAFA,iBAJA;AAAA;AAAA,uBAQA,KAAA,CAAA,QAAA,CAAA,GAAA,CAAA,GAAA,CAAA,OAAA,EAAA,IAAA,EAAA,SAAA,CARA;;AAAA;AAQA,gBAAA,QARA;;AAAA,oBASA,QATA;AAAA;AAAA;AAAA;;AAUA,gBAAA,KAAA,CAAA,sBAAA,GAAA,IAAA;AAVA;AAAA;;AAAA;AAAA;AAAA,uBAaA,QAbA;;AAAA;AAaA,gBAAA,MAbA;AAcA,gBAAA,IAdA,GAcA,MAAA,CAAA,IAAA,CAAA,IAdA;;AAeA,oBAAA,IAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,kBAAA,KAAA,CAAA,YAAA,GAAA,IAAA;AACA,iBAFA,MAGA;AACA,uBAAA,CAAA,GAAA,CAAA,EAAA,GAAA,GAAA,IAAA,CAAA,MAAA,EAAA,CAAA,GAAA,GAAA,EAAA,CAAA,EAAA,EAAA;AACA,wBAAA,gBAAA,IAAA,CAAA,CAAA,CAAA,CAAA,OAAA,EAAA;AACA,sBAAA,KAAA,CAAA,UAAA,GAAA,KAAA,CAAA,UAAA,CAAA,MAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA,UAAA,GAAA,GAAA,CAAA;AACA,sBAAA,KAAA,CAAA,YAAA,GAAA,KAAA;AACA;AACA;AACA;;AACA,gBAAA,KAAA,CAAA,MAAA,GAAA,KAAA;;AA1BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA4BA;AA7BA;AA5BA,CAAA","sourcesContent":["<template>\n  <div>\n    <div v-if=\"noTranscript === true\">\n      No transcript found for this asset\n    </div>\n    <div v-if=\"isBusy\">\n      <b-spinner\n        variant=\"secondary\"\n        label=\"Loading...\"\n      />\n      <p class=\"text-muted\">\n        (Loading...)\n      </p>\n    </div>\n    <div v-else>\n      <div v-if=\"isProfane\">\n        <span style=\"color:red\">WARNING: Transcript contains potentially offensive words.</span>\n        <br>\n        <br>\n      </div>\n      {{ transcript }}\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Transcript\",\n  data() {\n    return {\n      transcript: \"\",\n      isBusy: false,\n      operator: \"transcript\",\n      noTranscript: false\n    }\n  },\n  computed: {\n    isProfane() {\n      const Filter = require('bad-words');\n      const profanityFilter = new Filter({ placeHolder: '_' });\n      return profanityFilter.isProfane(this.transcript);\n    },\n  },\n  deactivated: function () {\n    this.transcript = \"\"\n    console.log('deactivated component:', this.operator)\n  },\n  activated: function () {\n    console.log('activated component:', this.operator);\n    this.fetchAssetData();\n  },\n  beforeDestroy: function () {\n      this.transcript = ''\n  },\n  methods: {\n    async fetchAssetData () {\n      let query = 'AssetId:'+this.$route.params.asset_id+ ' _index:mievideotranscript';\n      let apiName = 'contentAnalysisElasticsearch';\n      let path = '/_search';\n      let apiParams = {\n        headers: {'Content-Type': 'application/json'},\n        queryStringParameters: {'q': query, 'default_operator': 'AND', 'size': 10000}\n      };\n      let response = await this.$Amplify.API.get(apiName, path, apiParams);\n      if (!response) {\n        this.showElasticSearchAlert = true\n      }\n      else {\n        let result = await response;\n        let data = result.hits.hits;\n        if (data.length === 0) {\n          this.noTranscript = true\n        }\n        else {\n          for (let i = 0, len = data.length; i < len; i++) {\n            if ('transcript' in data[i]._source) {\n              this.transcript = this.transcript.concat(data[i]._source.transcript + \" \")\n              this.noTranscript = false;\n            }\n          }\n        }\n        this.isBusy = false\n      }\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/components"}]}