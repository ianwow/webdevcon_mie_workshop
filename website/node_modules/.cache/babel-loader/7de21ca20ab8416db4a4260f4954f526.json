{"remainingRequest":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/babel-loader/lib/index.js!/Users/ianwow/development/aws-content-analysis/source/website/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ianwow/development/aws-content-analysis/source/website/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ianwow/development/aws-content-analysis/source/website/src/components/ContentModeration.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ianwow/development/aws-content-analysis/source/website/src/components/ContentModeration.vue","mtime":1637348724760},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/cache-loader/dist/cjs.js","mtime":1633407346687},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/babel-loader/lib/index.js","mtime":1633407348173},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/cache-loader/dist/cjs.js","mtime":1633407346687},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/vue-loader/lib/index.js","mtime":1633407348650}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9pYW53b3cvZGV2ZWxvcG1lbnQvYXdzLWNvbnRlbnQtYW5hbHlzaXMvc291cmNlL3dlYnNpdGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIi9Vc2Vycy9pYW53b3cvZGV2ZWxvcG1lbnQvYXdzLWNvbnRlbnQtYW5hbHlzaXMvc291cmNlL3dlYnNpdGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2lhbndvdy9kZXZlbG9wbWVudC9hd3MtY29udGVudC1hbmFseXNpcy9zb3VyY2Uvd2Vic2l0ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwtc2VhcmNoLXBhcmFtcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mcm9tLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IExvYWRpbmcgZnJvbSAnQC9jb21wb25lbnRzL0xvYWRpbmcudnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDb250ZW50TW9kZXJhdGlvbiIsCiAgY29tcG9uZW50czogewogICAgTG9hZGluZzogTG9hZGluZwogIH0sCiAgcHJvcHM6IHsKICAgIG1lZGlhVHlwZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICIiCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY3VybENvbW1hbmQ6ICcnLAogICAgICBzZWFyY2hRdWVyeTogJycsCiAgICAgIHNob3dFbGFzdGljc2VhcmNoQXBpUmVxdWVzdDogZmFsc2UsCiAgICAgIENvbmZpZGVuY2U6IDkwLAogICAgICBoaWdoX2NvbmZpZGVuY2VfZGF0YTogW10sCiAgICAgIGVsYXN0aWNzZWFyY2hfZGF0YTogW10sCiAgICAgIGNvdW50X2Rpc3RpbmN0X2xhYmVsczogMCwKICAgICAgY291bnRfbGFiZWxzOiAwLAogICAgICBpc0J1c3k6IGZhbHNlLAogICAgICBvcGVyYXRvcjogJ2NvbnRlbnRfbW9kZXJhdGlvbicsCiAgICAgIHRpbWVzZXJpZXM6IG5ldyBNYXAoKSwKICAgICAgc2VsZWN0ZWRMYWJlbDogJycsCiAgICAgIGxvd2VyQ29uZmlkZW5jZTogZmFsc2UsCiAgICAgIGxvd2VyQ29uZmlkZW5jZU1lc3NhZ2U6ICdUcnkgbG93ZXJpbmcgY29uZmlkZW5jZSB0aHJlc2hvbGQnCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoWydwbGF5ZXInXSkpLCB7fSwgewogICAgc29ydGVkX3VuaXF1ZV9sYWJlbHM6IGZ1bmN0aW9uIHNvcnRlZF91bmlxdWVfbGFiZWxzKCkgewogICAgICAvLyBUaGlzIGZ1bmN0aW9uIHNvcnRzIGFuZCBjb3VudHMgdW5pcXVlIGxhYmVscyBmb3IgbW91c2Ugb3ZlciBldmVudHMgb24gbGFiZWwgYnV0dG9ucwogICAgICB2YXIgZXNfZGF0YSA9IHRoaXMuZWxhc3RpY3NlYXJjaF9kYXRhOwogICAgICB2YXIgdW5pcXVlX2xhYmVscyA9IG5ldyBNYXAoKTsgLy8gc29ydCBhbmQgY291bnQgdW5pcXVlIGxhYmVscyBmb3IgbGFiZWwgbW91c2Ugb3ZlciBldmVudHMKCiAgICAgIGVzX2RhdGEuZm9yRWFjaChmdW5jdGlvbiAocmVjb3JkKSB7CiAgICAgICAgdW5pcXVlX2xhYmVscy5zZXQocmVjb3JkLk5hbWUsIHVuaXF1ZV9sYWJlbHMuZ2V0KHJlY29yZC5OYW1lKSA/IHVuaXF1ZV9sYWJlbHMuZ2V0KHJlY29yZC5OYW1lKSArIDEgOiAxKTsKICAgICAgfSk7CiAgICAgIHZhciBzb3J0ZWRfdW5pcXVlX2xhYmVscyA9IG5ldyBNYXAoX3RvQ29uc3VtYWJsZUFycmF5KHVuaXF1ZV9sYWJlbHMuZW50cmllcygpKS5zbGljZSgpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICByZXR1cm4gYlsxXSAtIGFbMV07CiAgICAgIH0pKTsgLy8gSWYgRWxhc3RpY3NlYXJjaCByZXR1cm5lZCB1bmRlZmluZWQgbGFiZWxzIHRoZW4gZGVsZXRlIHRoZW06CgogICAgICBzb3J0ZWRfdW5pcXVlX2xhYmVscy5kZWxldGUodW5kZWZpbmVkKTsKICAgICAgdGhpcy5jb3VudExhYmVscyhzb3J0ZWRfdW5pcXVlX2xhYmVscy5zaXplLCBlc19kYXRhLmxlbmd0aCk7CiAgICAgIHJldHVybiBzb3J0ZWRfdW5pcXVlX2xhYmVsczsKICAgIH0KICB9KSwKICB3YXRjaDogewogICAgLy8gVGhlc2Ugd2F0Y2hlcyB1cGRhdGUgdGhlIGxpbmUgY2hhcnQKICAgIHNlbGVjdGVkTGFiZWw6IGZ1bmN0aW9uIHNlbGVjdGVkTGFiZWwoKSB7CiAgICAgIHRoaXMuY2hhcnREYXRhKCk7CiAgICB9LAogICAgZWxhc3RpY3NlYXJjaF9kYXRhOiBmdW5jdGlvbiBlbGFzdGljc2VhcmNoX2RhdGEoKSB7CiAgICAgIHRoaXMuY2hhcnREYXRhKCk7CiAgICB9CiAgfSwKICBkZWFjdGl2YXRlZDogZnVuY3Rpb24gZGVhY3RpdmF0ZWQoKSB7CiAgICBjb25zb2xlLmxvZygnZGVhY3RpdmF0ZWQgY29tcG9uZW50OicsIHRoaXMub3BlcmF0b3IpOwogICAgdGhpcy5zZWxlY3RlZExhYmVsID0gJyc7CiAgfSwKICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uIGFjdGl2YXRlZCgpIHsKICAgIGNvbnNvbGUubG9nKCdhY3RpdmF0ZWQgY29tcG9uZW50OicsIHRoaXMub3BlcmF0b3IpOwogICAgdGhpcy5mZXRjaEFzc2V0RGF0YSgpOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0Q3VybENvbW1hbmQoKTsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLmhpZ2hfY29uZmlkZW5jZV9kYXRhID0gW107CiAgICB0aGlzLmVsYXN0aWNzZWFyY2hfZGF0YSA9IFtdOwogICAgdGhpcy5jb3VudF9kaXN0aW5jdF9sYWJlbHMgPSAwOwogICAgdGhpcy5jb3VudF9sYWJlbHMgPSAwOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0Q3VybENvbW1hbmQ6IGZ1bmN0aW9uIGdldEN1cmxDb21tYW5kKCkgewogICAgICB0aGlzLnNlYXJjaFF1ZXJ5ID0gJ0Fzc2V0SWQ6JyArIHRoaXMuJHJvdXRlLnBhcmFtcy5hc3NldF9pZCArICcgQ29uZmlkZW5jZTo+JyArIHRoaXMuQ29uZmlkZW5jZSArICcgT3BlcmF0b3I6JyArIHRoaXMub3BlcmF0b3I7IC8vIGdldCBjdXJsIGNvbW1hbmQgdG8gc2VhcmNoIGVsYXN0aWNzZWFyY2gKCiAgICAgIHRoaXMuY3VybENvbW1hbmQgPSAnYXdzY3VybCAtWCBHRVQgLS1wcm9maWxlIGRlZmF1bHQgLS1zZXJ2aWNlIGVzIC0tcmVnaW9uICcgKyB0aGlzLkFXU19SRUdJT04gKyAnIFwnJyArIHRoaXMuU0VBUkNIX0VORFBPSU5UICsgJy9fc2VhcmNoP3E9JyArIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLnNlYXJjaFF1ZXJ5KSArICdcJyc7CiAgICB9LAogICAgY291bnRMYWJlbHM6IGZ1bmN0aW9uIGNvdW50TGFiZWxzKHVuaXF1ZV9jb3VudCwgdG90YWxfY291bnQpIHsKICAgICAgdGhpcy5jb3VudF9kaXN0aW5jdF9sYWJlbHMgPSB1bmlxdWVfY291bnQ7CiAgICAgIHRoaXMuY291bnRfbGFiZWxzID0gdG90YWxfY291bnQ7CiAgICB9LAogICAgc2F2ZUZpbGU6IGZ1bmN0aW9uIHNhdmVGaWxlKCkgewogICAgICB2YXIgZWxhc3RpY3NlYXJjaF9kYXRhID0gdGhpcy5lbGFzdGljc2VhcmNoX2RhdGE7CiAgICAgIHZhciBibG9iID0gbmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KGVsYXN0aWNzZWFyY2hfZGF0YSldLCB7CiAgICAgICAgdHlwZTogJ3RleHQvcGxhaW4nCiAgICAgIH0pOwogICAgICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdNb3VzZUV2ZW50cycpLAogICAgICAgICAgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgYS5kb3dubG9hZCA9ICJkYXRhLmpzb24iOwogICAgICBhLmhyZWYgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgYS5kYXRhc2V0LmRvd25sb2FkdXJsID0gWyd0ZXh0L2pzb24nLCBhLmRvd25sb2FkLCBhLmhyZWZdLmpvaW4oJzonKTsKICAgICAgZS5pbml0RXZlbnQoJ2NsaWNrJywgdHJ1ZSwgZmFsc2UsIHdpbmRvdywgMCwgMCwgMCwgMCwgMCwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIDAsIG51bGwpOwogICAgICBhLmRpc3BhdGNoRXZlbnQoZSk7CiAgICB9LAogICAgdXBkYXRlQ29uZmlkZW5jZTogZnVuY3Rpb24gdXBkYXRlQ29uZmlkZW5jZShldmVudCkgewogICAgICB0aGlzLmlzQnVzeSA9ICF0aGlzLmlzQnVzeTsKICAgICAgdGhpcy5Db25maWRlbmNlID0gZXZlbnQudGFyZ2V0LnZhbHVlOyAvLyBUT0RPOiBtb3ZlIGltYWdlIHByb2Nlc3NpbmcgdG8gYSBzZXBhcmF0ZSBjb21wb25lbnQKCiAgICAgIGlmICh0aGlzLm1lZGlhVHlwZSA9PT0gInZpZGVvIikgewogICAgICAgIC8vIHJlZHJhdyBtYXJrZXJzIG9uIHZpZGVvIHRpbWVsaW5lCiAgICAgICAgdGhpcy5wbGF5ZXIubWFya2Vycy5yZW1vdmVBbGwoKTsKICAgICAgfQoKICAgICAgdGhpcy5nZXRDdXJsQ29tbWFuZCgpOwogICAgICB0aGlzLmZldGNoQXNzZXREYXRhKCk7CiAgICB9LAogICAgLy8gdXBkYXRlTWFya2VycyB1cGRhdGVzIG1hcmtlcnMgaW4gdGhlIHZpZGVvIHBsYXllciBhbmQgaXMgY2FsbGVkIHdoZW4gc29tZW9uZSBjbGlja3Mgb24gYSBsYWJlbCBidXR0b24KICAgIHVwZGF0ZU1hcmtlcnM6IGZ1bmN0aW9uIHVwZGF0ZU1hcmtlcnMobGFiZWwpIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRMYWJlbCA9PT0gbGFiZWwpIHsKICAgICAgICAvLyBrZWVwIHRoZSBjYW52YXMgY2xlYXIgY2FudmFzIGlmIHVzZXIgY2xpY2tlZCB0aGUgbGFiZWwgYnV0dG9uIGEgc2Vjb25kIGNvbnNlY3V0aXZlIHRpbWUKICAgICAgICB0aGlzLnNlbGVjdGVkTGFiZWwgPSAiIjsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuc2VsZWN0ZWRMYWJlbCA9IGxhYmVsOwogICAgICB2YXIgbWFya2VycyA9IFtdOwogICAgICB2YXIgZXNfZGF0YSA9IHRoaXMuZWxhc3RpY3NlYXJjaF9kYXRhOwogICAgICBlc19kYXRhLmZvckVhY2goZnVuY3Rpb24gKHJlY29yZCkgewogICAgICAgIGlmIChyZWNvcmQuTmFtZSA9PT0gbGFiZWwpIHsKICAgICAgICAgIG1hcmtlcnMucHVzaCh7CiAgICAgICAgICAgICd0aW1lJzogcmVjb3JkLlRpbWVzdGFtcCAvIDEwMDAsCiAgICAgICAgICAgICd0ZXh0JzogcmVjb3JkLk5hbWUsCiAgICAgICAgICAgICdvdmVybGF5VGV4dCc6IHJlY29yZC5OYW1lCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOyAvLyBUT0RPOiBtb3ZlIGltYWdlIHByb2Nlc3NpbmcgdG8gYSBzZXBhcmF0ZSBjb21wb25lbnQKCiAgICAgIGlmICh0aGlzLm1lZGlhVHlwZSA9PT0gInZpZGVvIikgewogICAgICAgIC8vIHJlZHJhdyBtYXJrZXJzIG9uIHZpZGVvIHRpbWVsaW5lCiAgICAgICAgdGhpcy5wbGF5ZXIubWFya2Vycy5yZW1vdmVBbGwoKTsKICAgICAgICB0aGlzLnBsYXllci5tYXJrZXJzLmFkZChtYXJrZXJzKTsKICAgICAgfQogICAgfSwKICAgIGZldGNoQXNzZXREYXRhOiBmdW5jdGlvbiBmZXRjaEFzc2V0RGF0YSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGFwaU5hbWUsIHBhdGgsIGFwaVBhcmFtcywgcmVzcG9uc2UsIGVzX2RhdGEsIHJlc3VsdCwgZGF0YSwgZGF0YUxlbmd0aCwgaSwgbGVuOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGFwaU5hbWUgPSAnY29udGVudEFuYWx5c2lzRWxhc3RpY3NlYXJjaCc7CiAgICAgICAgICAgICAgICBwYXRoID0gJy9fc2VhcmNoJzsKICAgICAgICAgICAgICAgIGFwaVBhcmFtcyA9IHsKICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgcXVlcnlTdHJpbmdQYXJhbWV0ZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgJ3EnOiBfdGhpcy5zZWFyY2hRdWVyeSwKICAgICAgICAgICAgICAgICAgICAnZGVmYXVsdF9vcGVyYXRvcic6ICdBTkQnLAogICAgICAgICAgICAgICAgICAgICdzaXplJzogMTAwMDAKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRBbXBsaWZ5LkFQSS5nZXQoYXBpTmFtZSwgcGF0aCwgYXBpUGFyYW1zKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzLnNob3dFbGFzdGljU2VhcmNoQWxlcnQgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE5OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBlc19kYXRhID0gW107CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgZGF0YSA9IHJlc3VsdC5oaXRzLmhpdHM7CiAgICAgICAgICAgICAgICBkYXRhTGVuZ3RoID0gZGF0YS5sZW5ndGg7CgogICAgICAgICAgICAgICAgaWYgKGRhdGFMZW5ndGggPT09IDAgJiYgX3RoaXMuQ29uZmlkZW5jZSA+IDU1KSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLmxvd2VyQ29uZmlkZW5jZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgIF90aGlzLmxvd2VyQ29uZmlkZW5jZU1lc3NhZ2UgPSAnVHJ5IGxvd2VyaW5nIGNvbmZpZGVuY2UgdGhyZXNob2xkJzsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLmxvd2VyQ29uZmlkZW5jZSA9IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgZm9yIChpID0gMCwgbGVuID0gZGF0YUxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgZXNfZGF0YS5wdXNoKGRhdGFbaV0uX3NvdXJjZSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpcy5lbGFzdGljc2VhcmNoX2RhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGVzX2RhdGEpKTsKICAgICAgICAgICAgICAgIF90aGlzLmlzQnVzeSA9IGZhbHNlOwoKICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNoYXJ0RGF0YTogZnVuY3Rpb24gY2hhcnREYXRhKCkgewogICAgICB2YXIgdGltZXNlcmllcyA9IG5ldyBNYXAoKTsKCiAgICAgIGZ1bmN0aW9uIHNhdmVUaW1lc3RhbXAobWlsbGlzZWNvbmQpIHsKICAgICAgICBpZiAodGltZXNlcmllcy5oYXMobWlsbGlzZWNvbmQpKSB7CiAgICAgICAgICB0aW1lc2VyaWVzLnNldChtaWxsaXNlY29uZCwgewogICAgICAgICAgICAieCI6IG1pbGxpc2Vjb25kLAogICAgICAgICAgICAieSI6IHRpbWVzZXJpZXMuZ2V0KG1pbGxpc2Vjb25kKS55ICsgMQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRpbWVzZXJpZXMuc2V0KG1pbGxpc2Vjb25kLCB7CiAgICAgICAgICAgICJ4IjogbWlsbGlzZWNvbmQsCiAgICAgICAgICAgICJ5IjogMQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CgogICAgICB2YXIgZXNfZGF0YSA9IHRoaXMuZWxhc3RpY3NlYXJjaF9kYXRhOwogICAgICBlc19kYXRhLmZvckVhY2goZnVuY3Rpb24gKHJlY29yZCkgewogICAgICAgIC8vIERlZmluZSB0aW1lc3RhbXAgd2l0aCBtaWxsaXNlY29uZCByZXNvbHV0aW9uCiAgICAgICAgdmFyIG1pbGxpc2Vjb25kID0gTWF0aC5yb3VuZChyZWNvcmQuVGltZXN0YW1wKTsKCiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRMYWJlbCkgewogICAgICAgICAgLy8gSWYgbGFiZWwgaXMgZGVmaW5lZCwgdGhlbiBlbnVtZXJhdGUgdGltZXN0YW1wcyBmb3IgdGhhdCBsYWJlbAogICAgICAgICAgaWYgKHJlY29yZC5OYW1lID09PSB0aGlzLnNlbGVjdGVkTGFiZWwpIHsKICAgICAgICAgICAgc2F2ZVRpbWVzdGFtcChtaWxsaXNlY29uZCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIE5vIGxhYmVsIGhhcyBiZWVuIHNlbGVjdGVkLCBzbyBlbnVtZXJhdGUgdGltZXN0YW1wcyBmb3IgYWxsIGxhYmVsIG5hbWVzLgogICAgICAgICAgc2F2ZVRpbWVzdGFtcChtaWxsaXNlY29uZCk7CiAgICAgICAgfQogICAgICB9LmJpbmQodGhpcykpOyAvL3NvcnQgdGhlIHRpbWVzZXJpZXMgbWFwIGJ5IGl0cyBtaWxsaXNlY29uZCBrZXkKCiAgICAgIHZhciBvcmRlcmVkX3RpbWVzZXJpZXMgPSBuZXcgTWFwKF90b0NvbnN1bWFibGVBcnJheSh0aW1lc2VyaWVzLmVudHJpZXMoKSkuc2xpY2UoKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgcmV0dXJuIGFbMF0gLSBiWzBdOwogICAgICB9KSk7CiAgICAgIHZhciBjaGFydFR1cGxlcyA9IEFycmF5LmZyb20ob3JkZXJlZF90aW1lc2VyaWVzLnZhbHVlcygpKTsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCd1cGRhdGVUaW1lc2VyaWVzJywgY2hhcnRUdXBsZXMpOwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3VwZGF0ZVNlbGVjdGVkTGFiZWwnLCB0aGlzLnNlbGVjdGVkTGFiZWwpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["ContentModeration.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <b-container fluid>\n    <b-col>\n      <b-row\n        align-h=\"center\"\n        class=\"my-1\"\n      >\n        <div class=\"wrapper\">\n          Confidence Threshold<br>\n          <input\n            type=\"range\"\n            value=\"90\"\n            min=\"55\"\n            max=\"99\"\n            step=\"1\"\n            @click=\"updateConfidence\"\n          >\n          {{ Confidence }}%<br>\n        </div>\n      </b-row>\n      <div v-if=\"lowerConfidence === true\">\n        {{ lowerConfidenceMessage }}\n      </div>\n      <div\n        v-if=\"isBusy\"\n        class=\"wrapper\"\n      >\n        <Loading />\n      </div>\n      <b-row\n        align-h=\"center\"\n        class=\"my-1\"\n      >\n        <div class=\"wrapper\">\n          <br>\n          <template v-for=\"label in sorted_unique_labels\">\n            <!-- Show lighter button outline since content moderation never provides bounding boxes -->\n            <b-button\n              v-b-tooltip.hover\n              variant=\"outline-secondary\"\n              :title=\"label[1]\"\n              size=\"sm\"\n              pill\n              @click=\"updateMarkers(label[0])\"\n            >\n              {{ label[0] }}\n            </b-button> &nbsp;\n          </template>\n        </div>\n      </b-row>\n\n      <b-row\n        align-h=\"center\"\n        class=\"my-1\"\n      >\n        <div\n          v-if=\"isBusy === false\"\n          class=\"wrapper\"\n        >\n          <br><p class=\"text-muted\">\n            ({{ count_labels }} identified objects, {{ count_distinct_labels }} unique)\n          </p>\n        </div>\n      </b-row>\n    </b-col>\n    <b-button\n      type=\"button\"\n      @click=\"saveFile()\"\n    >\n      Download Data\n    </b-button>\n    <br>\n    <b-button\n        :pressed=\"false\"\n        size=\"sm\"\n        variant=\"link\"\n        class=\"text-decoration-none\"\n        @click=\"showElasticsearchApiRequest = true\"\n    >\n      Show API request to get these results\n    </b-button>\n    <b-modal\n        v-model=\"showElasticsearchApiRequest\"\n        scrollable\n        title=\"SEARCH API\"\n        ok-only\n    >\n      <label>Request URL:</label>\n      <pre v-highlightjs><code class=\"bash\">GET {{ SEARCH_ENDPOINT }}workflow/execution</code></pre>\n      <label>Search query:</label>\n      <pre v-highlightjs=\"JSON.stringify(searchQuery)\"><code class=\"json\"></code></pre>\n      <label>Sample command:</label>\n      <pre v-highlightjs=\"curlCommand\"><code class=\"bash\"></code></pre>\n    </b-modal>\n  </b-container>\n</template>\n\n<script>\n  import { mapState } from 'vuex'\n  import Loading from '@/components/Loading.vue'\n\n  export default {\n    name: \"ContentModeration\",\n    components: {\n      Loading\n    },\n    props: {\n      mediaType: {\n        type: String,\n        default: \"\"\n      },\n    },\n    data() {\n      return {\n        curlCommand: '',\n        searchQuery: '',\n        showElasticsearchApiRequest: false,\n        Confidence: 90,\n        high_confidence_data: [],\n        elasticsearch_data: [],\n        count_distinct_labels: 0,\n        count_labels: 0,\n        isBusy: false,\n        operator: 'content_moderation',\n        timeseries: new Map(),\n        selectedLabel: '',\n        lowerConfidence: false,\n        lowerConfidenceMessage: 'Try lowering confidence threshold'\n      }\n    },\n    computed: {\n      ...mapState(['player']),\n      sorted_unique_labels() {\n        // This function sorts and counts unique labels for mouse over events on label buttons\n        const es_data = this.elasticsearch_data;\n        const unique_labels = new Map();\n        // sort and count unique labels for label mouse over events\n        es_data.forEach(function (record) {\n          unique_labels.set(record.Name, unique_labels.get(record.Name) ? unique_labels.get(record.Name) + 1 : 1)\n        });\n        const sorted_unique_labels = new Map([...unique_labels.entries()].slice().sort((a, b) => b[1] - a[1]));\n        // If Elasticsearch returned undefined labels then delete them:\n        sorted_unique_labels.delete(undefined);\n        this.countLabels(sorted_unique_labels.size, es_data.length);\n        return sorted_unique_labels\n      }\n    },\n    watch: {\n      // These watches update the line chart\n      selectedLabel: function() {\n        this.chartData();\n      },\n      elasticsearch_data: function() {\n        this.chartData();\n      },\n    },\n    deactivated: function () {\n      console.log('deactivated component:', this.operator);\n      this.selectedLabel = '';\n    },\n    activated: function () {\n      console.log('activated component:', this.operator);\n      this.fetchAssetData();\n    },\n    mounted: function() {\n      this.getCurlCommand();\n    },\n    beforeDestroy: function () {\n      this.high_confidence_data = [];\n      this.elasticsearch_data = [];\n      this.count_distinct_labels = 0;\n      this.count_labels = 0;\n    },\n    methods: {\n      getCurlCommand() {\n        this.searchQuery = 'AssetId:'+this.$route.params.asset_id+' Confidence:>'+this.Confidence+' Operator:'+this.operator;\n        // get curl command to search elasticsearch\n        this.curlCommand = 'awscurl -X GET --profile default --service es --region ' + this.AWS_REGION + ' \\'' + this.SEARCH_ENDPOINT + '/_search?q=' + encodeURIComponent(this.searchQuery) + '\\''\n      },\n      countLabels(unique_count, total_count) {\n        this.count_distinct_labels = unique_count;\n        this.count_labels = total_count;\n      },\n      saveFile() {\n        const elasticsearch_data = this.elasticsearch_data;\n        const blob = new Blob([JSON.stringify(elasticsearch_data)], {type: 'text/plain'});\n        const e = document.createEvent('MouseEvents'),\n          a = document.createElement('a');\n        a.download = \"data.json\";\n        a.href = window.URL.createObjectURL(blob);\n        a.dataset.downloadurl = ['text/json', a.download, a.href].join(':');\n        e.initEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n        a.dispatchEvent(e);\n      },\n      updateConfidence (event) {\n        this.isBusy = !this.isBusy;\n        this.Confidence = event.target.value;\n        // TODO: move image processing to a separate component\n        if (this.mediaType === \"video\") {\n          // redraw markers on video timeline\n          this.player.markers.removeAll();\n        }\n        this.getCurlCommand();\n        this.fetchAssetData();\n      },\n      // updateMarkers updates markers in the video player and is called when someone clicks on a label button\n      updateMarkers (label) {\n        if (this.selectedLabel === label) {\n          // keep the canvas clear canvas if user clicked the label button a second consecutive time\n          this.selectedLabel = \"\";\n          return\n        }\n        this.selectedLabel = label;\n        let markers = [];\n        const es_data = this.elasticsearch_data;\n        es_data.forEach(function (record) {\n          if (record.Name === label) {\n            markers.push({'time': record.Timestamp/1000, 'text': record.Name, 'overlayText': record.Name})\n          }\n        });\n        // TODO: move image processing to a separate component\n        if (this.mediaType === \"video\") {\n          // redraw markers on video timeline\n          this.player.markers.removeAll();\n          this.player.markers.add(markers);\n        }\n      },\n      async fetchAssetData () {\n          let apiName = 'contentAnalysisElasticsearch';\n          let path = '/_search';\n          let apiParams = {\n            headers: {'Content-Type': 'application/json'},\n            queryStringParameters: {'q': this.searchQuery, 'default_operator': 'AND', 'size': 10000}\n          };\n          let response = await this.$Amplify.API.get(apiName, path, apiParams);\n          if (!response) {\n            this.showElasticSearchAlert = true\n          }\n          else {\n            let es_data = [];\n            let result = await response;\n            let data = result.hits.hits;\n            let dataLength = data.length;\n            if (dataLength === 0 && this.Confidence > 55)  {\n              this.lowerConfidence = true;\n              this.lowerConfidenceMessage = 'Try lowering confidence threshold'\n            }\n            else {\n              this.lowerConfidence = false;\n              for (let i = 0, len = dataLength; i < len; i++) {\n                es_data.push(data[i]._source)\n              }\n            }\n            this.elasticsearch_data = JSON.parse(JSON.stringify(es_data));\n            this.isBusy = false\n        }\n      },\n      chartData() {\n        let timeseries = new Map();\n        function saveTimestamp (millisecond) {\n          if (timeseries.has(millisecond)) {\n            timeseries.set(millisecond, {\"x\": millisecond, \"y\": timeseries.get(millisecond).y + 1})\n          } else {\n            timeseries.set(millisecond, {\"x\": millisecond, \"y\":1})\n          }\n        }\n        const es_data = this.elasticsearch_data;\n        es_data.forEach( function(record) {\n          // Define timestamp with millisecond resolution\n          const millisecond = Math.round(record.Timestamp);\n          if (this.selectedLabel) {\n            // If label is defined, then enumerate timestamps for that label\n            if (record.Name === this.selectedLabel) {\n              saveTimestamp(millisecond);\n            }\n          } else {\n            // No label has been selected, so enumerate timestamps for all label names.\n            saveTimestamp(millisecond);\n          }\n        }.bind(this));\n        //sort the timeseries map by its millisecond key\n        const ordered_timeseries = new Map([...timeseries.entries()].slice().sort((a, b) => a[0] - b[0]));\n        const chartTuples = Array.from(ordered_timeseries.values());\n        this.$store.commit('updateTimeseries', chartTuples);\n        this.$store.commit('updateSelectedLabel', this.selectedLabel);\n      },\n    }\n  }\n</script>\n"],"sourceRoot":"src/components"}]}