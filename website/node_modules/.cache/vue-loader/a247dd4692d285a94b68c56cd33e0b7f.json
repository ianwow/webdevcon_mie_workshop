{"remainingRequest":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ianwow/development/aws-content-analysis/source/website/src/components/VideoPlayer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ianwow/development/aws-content-analysis/source/website/src/components/VideoPlayer.vue","mtime":1631830990691},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/cache-loader/dist/cjs.js","mtime":1633407346687},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/babel-loader/lib/index.js","mtime":1633407348173},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/cache-loader/dist/cjs.js","mtime":1633407346687},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/vue-loader/lib/index.js","mtime":1633407348650}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB2aWRlb2pzIGZyb20gJ3ZpZGVvLmpzJwppbXBvcnQgJ0AvLi4vbm9kZV9tb2R1bGVzL3ZpZGVvLmpzL2Rpc3QvdmlkZW8tanMuY3NzJwppbXBvcnQgJ0AvLi4vbm9kZV9tb2R1bGVzL3ZpZGVvanMtbWFya2Vycy9kaXN0L3ZpZGVvanMubWFya2Vycy5jc3MnCmltcG9ydCAnQC8uLi9ub2RlX21vZHVsZXMvdmlkZW9qcy1tYXJrZXJzL2Rpc3QvdmlkZW9qcy1tYXJrZXJzLmpzJwppbXBvcnQgJ0AvLi4vbm9kZV9tb2R1bGVzL3ZpZGVvanMtaG90a2V5cy9idWlsZC92aWRlb2pzLmhvdGtleXMubWluLmpzJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdWaWRlb1BsYXllcicsCiAgcHJvcHM6IHsKICAgIG9wdGlvbnM6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7fTsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHsKICAgICAgdmlkZW9fdXJsOiAnJywKICAgICAgcGxheWVyOiBudWxsCiAgICB9CiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgaWYgKHRoaXMucGxheWVyKSB7CiAgICAgIHRoaXMucGxheWVyLmRpc3Bvc2UoKTsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCd1cGRhdGVQbGF5ZXInLCBudWxsKQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMudmlkZW9fdXJsID0gdGhpcy5vcHRpb25zLnNvdXJjZXNbMF0uc3JjOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gKCkgewogICAgdGhpcy5wbGF5ZXIgPSB2aWRlb2pzKHRoaXMuJHJlZnMudmlkZW9QbGF5ZXIsIHsgIHBsYXliYWNrUmF0ZXM6IFswLjUsIDEsIDEuNSwgMl0gfSk7CiAgICB0aGlzLnBsYXllci5yZWFkeSgoKSA9PiB7CiAgICAgIHRoaXMucGxheWVyLmhvdGtleXMoewogICAgICAgIHZvbHVtZVN0ZXA6IDAuMSwKICAgICAgICBzZWVrU3RlcDogMSwKICAgICAgICBlbmFibGVWb2x1bWVTY3JvbGw6IGZhbHNlLAogICAgICAgIGVuYWJsZU51bWJlcnM6IGZhbHNlLAogICAgICAgIGVuYWJsZU1vZGlmaWVyc0Zvck51bWJlcnM6IGZhbHNlCiAgICAgIH0pOwogICAgICB0aGlzLnBsYXllci5sb29wKHRydWUpOwogICAgICB0aGlzLnBsYXllci5tYXJrZXJzKHsKICAgICAgICBicmVha092ZXJsYXk6IHsKICAgICAgICAgIGRpc3BsYXk6IGZhbHNlLAogICAgICAgIH0sCiAgICAgICAgbWFya2VyVGlwOiB7CiAgICAgICAgICBkaXNwbGF5OiB0cnVlLAogICAgICAgICAgdGV4dDogZnVuY3Rpb24gKG1hcmtlcikgewogICAgICAgICAgICByZXR1cm4gbWFya2VyLnRleHQ7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBtYXJrZXJzOiBbXQogICAgICB9KTsKICAgICAgLy8gU2V0IHBsYXllciB0aW1lIHRvIDIgc2Vjb25kIG1hcmsgaW4gb3JkZXIgdG8gYXZvaWQgYSBibGFjayBwb3N0ZXIgaW1hZ2UgZm9yCiAgICAgIC8vIHZpZGVvcyB0aGF0IGJlZ2luIHdpdGggYSBmYWRlIGZyb20gYmxhY2suCiAgICAgIHRoaXMucGxheWVyLmN1cnJlbnRUaW1lKDIpOwogICAgICBsZXQgdm0gPSB0aGlzCiAgICAgIHRoaXMucGxheWVyLm9uKCd0aW1ldXBkYXRlJywgZnVuY3Rpb24oKSB7CiAgICAgICAgbGV0IGN1cnJlbnRUaW1lID0gdGhpcy5jdXJyZW50VGltZSgpCiAgICAgICAgdm0uJHN0b3JlLmNvbW1pdCgndXBkYXRlQ3VycmVudFRpbWUnLCBjdXJyZW50VGltZSkKICAgICAgfSk7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndXBkYXRlUGxheWVyJywgdGhpcy5wbGF5ZXIpOwogICAgfSk7CiAgICB0aGlzLnBsYXllci5vbignbG9hZGVkZGF0YScsIGZ1bmN0aW9uKCkgewogICAgICAvLyBTZXQgY2FudmFzIHNpemUgdG8gdmlkZW9QbGF5ZXIgc2l6ZQogICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzJyk7CiAgICAgIGNvbnN0IHZpZGVvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZGVvUGxheWVyJyk7CiAgICAgIGNhbnZhcy53aWR0aCA9IHZpZGVvLmNsaWVudFdpZHRoOwogICAgICBjYW52YXMuaGVpZ2h0ID0gdmlkZW8uY2xpZW50SGVpZ2h0OwogICAgfSk7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24gKCkgewogICAgICBjb25zb2xlLmxvZygicmVzaXplIikKICAgICAgLy8gVXBkYXRlIGNhbnZhcyBzaXplIHdoZW4gd2luZG93IGlzIHJlc2l6ZWQKICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhcycpOwogICAgICBjb25zdCB2aWRlbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWRlb1BsYXllcicpOwogICAgICBjYW52YXMud2lkdGggPSB2aWRlby5jbGllbnRXaWR0aDsKICAgICAgY2FudmFzLmhlaWdodCA9IHZpZGVvLmNsaWVudEhlaWdodDsKICAgIH0pOwogIH0sCiAgYmVmb3JlVXBkYXRlOiBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3VwZGF0ZVBsYXllcicsIHRoaXMucGxheWVyKQogIH0KfQo="},{"version":3,"sources":["VideoPlayer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VideoPlayer.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <b-container fluid>\n    <video\n      id=\"videoPlayer\"\n      ref=\"videoPlayer\"\n      width=\"600\"\n      height=\"300\"\n      data-setup=\"{ &quot;inactivityTimeout&quot;: 0 }\"\n      class=\"video-js vjs-fluid vjs-default-skin\"\n      controls\n      playsinline\n    >\n      <source\n        :src=\"video_url\"\n        type=\"video/mp4\"\n      >\n    </video>\n    <canvas\n      id=\"canvas\"\n      class=\"canvas\"\n    />\n  </b-container>\n</template>\n\n<script>\nimport videojs from 'video.js'\nimport '@/../node_modules/video.js/dist/video-js.css'\nimport '@/../node_modules/videojs-markers/dist/videojs.markers.css'\nimport '@/../node_modules/videojs-markers/dist/videojs-markers.js'\nimport '@/../node_modules/videojs-hotkeys/build/videojs.hotkeys.min.js'\n\nexport default {\n  name: 'VideoPlayer',\n  props: {\n    options: {\n      type: Object,\n      default() {\n        return {};\n      }\n    }\n  },\n  data: function () {\n    return {\n      video_url: '',\n      player: null\n    }\n  },\n  beforeDestroy() {\n    if (this.player) {\n      this.player.dispose();\n      this.$store.commit('updatePlayer', null)\n    }\n  },\n  created() {\n    this.video_url = this.options.sources[0].src;\n  },\n  mounted: function () {\n    this.player = videojs(this.$refs.videoPlayer, {  playbackRates: [0.5, 1, 1.5, 2] });\n    this.player.ready(() => {\n      this.player.hotkeys({\n        volumeStep: 0.1,\n        seekStep: 1,\n        enableVolumeScroll: false,\n        enableNumbers: false,\n        enableModifiersForNumbers: false\n      });\n      this.player.loop(true);\n      this.player.markers({\n        breakOverlay: {\n          display: false,\n        },\n        markerTip: {\n          display: true,\n          text: function (marker) {\n            return marker.text;\n          }\n        },\n        markers: []\n      });\n      // Set player time to 2 second mark in order to avoid a black poster image for\n      // videos that begin with a fade from black.\n      this.player.currentTime(2);\n      let vm = this\n      this.player.on('timeupdate', function() {\n        let currentTime = this.currentTime()\n        vm.$store.commit('updateCurrentTime', currentTime)\n      });\n      this.$store.commit('updatePlayer', this.player);\n    });\n    this.player.on('loadeddata', function() {\n      // Set canvas size to videoPlayer size\n      const canvas = document.getElementById('canvas');\n      const video = document.getElementById('videoPlayer');\n      canvas.width = video.clientWidth;\n      canvas.height = video.clientHeight;\n    });\n    window.addEventListener('resize', function () {\n      console.log(\"resize\")\n      // Update canvas size when window is resized\n      const canvas = document.getElementById('canvas');\n      const video = document.getElementById('videoPlayer');\n      canvas.width = video.clientWidth;\n      canvas.height = video.clientHeight;\n    });\n  },\n  beforeUpdate: function () {\n    this.$store.commit('updatePlayer', this.player)\n  }\n}\n</script>\n\n<style>\n  .video-js .vjs-current-time, .vjs-no-flex .vjs-current-time {\n    display: block; }\n</style>\n<style scoped>\n  .canvas {\n    position: absolute;\n    top: 0;\n    left: 30px;\n    /*background-color:rgba(255,0,0,0.5);*/\n    pointer-events: none;\n  }\n</style>\n"]}]}