{"remainingRequest":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ianwow/development/aws-content-analysis/source/website/src/views/Collection.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ianwow/development/aws-content-analysis/source/website/src/views/Collection.vue","mtime":1642006298189},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/cache-loader/dist/cjs.js","mtime":1633407346687},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/thread-loader/dist/cjs.js","mtime":1633407346686},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/babel-loader/lib/index.js","mtime":1633407348173},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/cache-loader/dist/cjs.js","mtime":1633407346687},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/vue-loader/lib/index.js","mtime":1633407348650}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBIZWFkZXIgZnJvbSAnQC9jb21wb25lbnRzL0hlYWRlci52dWUnCmltcG9ydCBWaWRlb1RodW1ibmFpbCBmcm9tICdAL2NvbXBvbmVudHMvVmlkZW9UaHVtYm5haWwudnVlJwppbXBvcnQgTG9hZGluZyBmcm9tICdAL2NvbXBvbmVudHMvTG9hZGluZy52dWUnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlJ1biIsCiAgY29tcG9uZW50czogewogICAgSGVhZGVyLAogICAgTG9hZGluZywKICAgIFZpZGVvVGh1bWJuYWlsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd0VsYXN0aWNTZWFyY2hBbGVydDogZmFsc2UsCiAgICAgIHNob3dEYXRhcGxhbmVBbGVydDogZmFsc2UsCiAgICAgIHNob3dEZWxldGVkQWxlcnQ6IDAsCiAgICAgIG5vQXNzZXRzOiBudWxsLAogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgcGVyUGFnZTogMTAsCiAgICAgIGlzQnVzeTogZmFsc2UsCiAgICAgIHVzZXJfZGVmaW5lZF9xdWVyeTogIiIsCiAgICAgIGFzc2V0X2xpc3Q6IFtdLAogICAgICBzb3J0Qnk6ICdDcmVhdGVkJywKICAgICAgc29ydERlc2M6IHRydWUsCiAgICAgIGZpZWxkczogWwogICAgICAgICAgewogICAgICAgICAgICAnVGh1bWJuYWlsJzogewogICAgICAgICAgICBsYWJlbDogIlRodW1ibmFpbCIsCiAgICAgICAgICAgIHNvcnRhYmxlOiBmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICAnRmlsZW5hbWUnOiB7CiAgICAgICAgICAgIGxhYmVsOiAiRmlsZSBOYW1lIiwKICAgICAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgICAgIHRkQ2xhc3M6IFsidGFibGVXb3JkV3JhcCJdCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgICdzdGF0dXMnOiB7CiAgICAgICAgICAgIGxhYmVsOiAiU3RhdHVzIiwKICAgICAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgICAgIHRkQ2xhc3M6IFsidGFibGVXb3JkV3JhcCJdCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAnYXNzZXRfaWQnOiB7CiAgICAgICAgICAgIGxhYmVsOiAnQXNzZXQgSUQnLAogICAgICAgICAgICBzb3J0YWJsZTogZmFsc2UsCiAgICAgICAgICAgIHRkQ2xhc3M6IFsidGFibGVXb3JkV3JhcCJdCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgICdDcmVhdGVkJzogewogICAgICAgICAgICBsYWJlbDogIkNyZWF0ZWQiLAogICAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICAgICAgdGRDbGFzczogWyJ0YWJsZVdvcmRXcmFwIl0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgJ0FjdGlvbnMnOiB7CiAgICAgICAgICAgIGxhYmVsOiAnQWN0aW9ucycsCiAgICAgICAgICAgIHNvcnRhYmxlOiBmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgIF0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICB0b3RhbFJvd3MoKSB7CiAgICAgIHJldHVybiB0aGlzLmFzc2V0X2xpc3QubGVuZ3RoCiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLmlzQnVzeSA9IHRydWU7CiAgICB0aGlzLnJldHJpZXZlQW5kRm9ybWF0QXNzc2V0cygpCiAgfSwKICBtZXRob2RzOiB7CiAgICBvcGVuV2luZG93OiBmdW5jdGlvbiAodXJsKSB7CiAgICAgIHdpbmRvdy5vcGVuKHVybCwgIl9ibGFuayIsICJub29wZW5lcixub3JlZmVyZXIiKTsKICAgIH0sCiAgICBhc3luYyBkZWxldGVBc3NldChhc3NldElkKSB7CiAgICAgIGxldCBhcGlOYW1lID0gJ21pZURhdGFwbGFuZUFwaScKICAgICAgbGV0IHBhdGggPSAnbWV0YWRhdGEvJyArIGFzc2V0SWQKICAgICAgbGV0IHJlcXVlc3RPcHRzID0gewogICAgICAgIHJlc3BvbnNlOiB0cnVlLAogICAgICB9OwogICAgICB0cnkgewogICAgICAgIGF3YWl0IHRoaXMuJEFtcGxpZnkuQVBJLmRlbChhcGlOYW1lLCBwYXRoLCByZXF1ZXN0T3B0cyk7CiAgICAgICAgdGhpcy5zaG93RGVsZXRlZEFsZXJ0ID0gNTsKICAgICAgICB0aGlzLmFzc2V0X2xpc3QgPSBbXTsKICAgICAgICB0aGlzLnJldHJpZXZlQW5kRm9ybWF0QXNzc2V0cygpCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy5zaG93RGF0YXBsYW5lQWxlcnQgPSB0cnVlCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBlbGFzdGljc2VhcmNoUXVlcnkgKHF1ZXJ5KSB7CiAgICAgICAgICBsZXQgYXBpTmFtZSA9ICdjb250ZW50QW5hbHlzaXNFbGFzdGljc2VhcmNoJzsKICAgICAgICAgIGxldCBwYXRoID0gJy9fc2VhcmNoJzsKICAgICAgICAgIGxldCBhcGlQYXJhbXMgPSB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfSwKICAgICAgICAgICAgYm9keTogewogICAgICAgICAgICAiYWdncyIgOiB7CiAgICAgICAgICAgICAgImRpc3RpbmN0X2Fzc2V0cyIgOiB7CiAgICAgICAgICAgICAgICAidGVybXMiIDogeyAiZmllbGQiIDogIkFzc2V0SWQua2V5d29yZCIsICJzaXplIiA6IDEwMDAwIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBxdWVyeVN0cmluZ1BhcmFtZXRlcnM6IHsncSc6IHF1ZXJ5LCAnX3NvdXJjZSc6ICdBc3NldElkJ30KICAgICAgICAgIH07CiAgICAgICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLiRBbXBsaWZ5LkFQSS5wb3N0KGFwaU5hbWUsIHBhdGgsIGFwaVBhcmFtcyk7CiAgICAgICAgICBpZiAoIXJlc3BvbnNlKSB7CiAgICAgICAgICAgIHRoaXMuc2hvd0VsYXN0aWNTZWFyY2hBbGVydCA9IHRydWUKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICB0aGlzLm5vQXNzZXRzID0gZmFsc2U7CiAgICAgICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIHNlYXJjaENvbGxlY3Rpb24gKCkgewogICAgICAgIHRoaXMubm9TZWFyY2hSZXN1bHRzID0gZmFsc2U7CiAgICAgICAgdGhpcy5pc0J1c3kgPSB0cnVlOwogICAgICAgIGxldCBxdWVyeSA9IHRoaXMudXNlcl9kZWZpbmVkX3F1ZXJ5OwogICAgICAgIC8vIGlmIHNlYXJjaCBpcyBlbXB0eSBzdHJpbmcgdGhlbiBnZXQgYXNzZXQgbGlzdCBmcm9tIGRhdGFwbGFuZSBpbnN0ZWFkIG9mIEVsYXN0aWNzZWFyY2guCiAgICAgICAgaWYgKHF1ZXJ5ID09PSAiIikgewogICAgICAgICAgdGhpcy5zaG93RWxhc3RpY1NlYXJjaEFsZXJ0ID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmFzc2V0X2xpc3QgPSBbXTsKICAgICAgICAgIHRoaXMucmV0cmlldmVBbmRGb3JtYXRBc3NzZXRzKCk7CiAgICAgICAgICB0aGlzLmlzQnVzeSA9IGZhbHNlOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgIC8vIEdldCB0aGUgbGlzdCBvZiBhc3NldHMgdGhhdCBjb250YWluIG1ldGFkYXRhIG1hdGNoaW5nIHRoZSB1c2VyLXNwZWNpZmllZCBzZWFyY2ggcXVlcnkuCiAgICAgICAgICBsZXQgZWxhc3RpY0RhdGEgPSBhd2FpdCB0aGlzLmVsYXN0aWNzZWFyY2hRdWVyeShxdWVyeSk7CiAgICAgICAgICBpZiAoZWxhc3RpY0RhdGEuaGl0cy50b3RhbCA9PT0gMCkgewogICAgICAgICAgICAvLyB0aGUgc2VhcmNoIHJldHVybmVkIG5vIGRhdGEKICAgICAgICAgICAgdGhpcy5hc3NldF9saXN0ID0gW107CiAgICAgICAgICAgIHRoaXMubm9TZWFyY2hSZXN1bHRzID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5pc0J1c3kgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICBsZXQgYXNzZXRzID0gW107CiAgICAgICAgICAgIHRoaXMuYXNzZXRfbGlzdCA9IFtdOwogICAgICAgICAgICB0aGlzLm5vU2VhcmNoUmVzdWx0cyA9IGZhbHNlOwogICAgICAgICAgICBsZXQgYnVja2V0cyA9IGVsYXN0aWNEYXRhLmFnZ3JlZ2F0aW9ucy5kaXN0aW5jdF9hc3NldHMuYnVja2V0czsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGJ1Y2tldHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgICBsZXQgYXNzZXRJZCA9IGJ1Y2tldHNbaV0ua2V5OwogICAgICAgICAgICAgIGxldCBhc3NldEluZm8gPSBhd2FpdCB0aGlzLmdldEFzc2V0SW5mb3JtYXRpb24oYXNzZXRJZCk7CiAgICAgICAgICAgICAgaWYgKGFzc2V0SW5mbyAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgYXNzZXRzLnB1c2goYXNzZXRJbmZvKQogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChhc3NldHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIHRoaXMubm9TZWFyY2hSZXN1bHRzID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5pc0J1c3kgPSBmYWxzZQogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHRoaXMucHVzaEFzc2V0c1RvVGFibGUoYXNzZXRzKTsKICAgICAgICAgICAgdGhpcy5pc0J1c3kgPSBmYWxzZQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGFzeW5jIGdldEFzc2V0V29ya2Zsb3dTdGF0dXMgKGFzc2V0SWQpIHsKICAgICAgbGV0IGFwaU5hbWUgPSAnbWllV29ya2Zsb3dBcGknCiAgICAgIGxldCBwYXRoID0gJ3dvcmtmbG93L2V4ZWN1dGlvbi9hc3NldC8nICsgYXNzZXRJZAogICAgICBsZXQgcmVxdWVzdE9wdHMgPSB7CiAgICAgICAgcmVzcG9uc2U6IHRydWUsCiAgICAgIH07CiAgICAgIHRyeSB7CiAgICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy4kQW1wbGlmeS5BUEkuZ2V0KGFwaU5hbWUsIHBhdGgsIHJlcXVlc3RPcHRzKTsKICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICB9CiAgICB9LAogICAgYXN5bmMgZ2V0QXNzZXRUaHVtYm5haWwgKGJ1Y2tldCwgczNLZXkpIHsKICAgICAgY29uc3QgZGF0YSA9IHsgIlMzQnVja2V0IjogYnVja2V0LCAiUzNLZXkiOiBzM0tleSB9OwogICAgICBsZXQgYXBpTmFtZSA9ICdtaWVEYXRhcGxhbmVBcGknCiAgICAgIGxldCBwYXRoID0gJ2Rvd25sb2FkJwogICAgICBsZXQgcmVxdWVzdE9wdHMgPSB7CiAgICAgICAgYm9keTogZGF0YSwKICAgICAgICByZXNwb25zZTogdHJ1ZSwKICAgICAgICByZXNwb25zZVR5cGU6ICd0ZXh0JwogICAgICB9OwogICAgICB0cnkgewogICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMuJEFtcGxpZnkuQVBJLnBvc3QoYXBpTmFtZSwgcGF0aCwgcmVxdWVzdE9wdHMpOwogICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy5zaG93RGF0YXBsYW5lQWxlcnQgPSB0cnVlCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBnZXRBc3NldEluZm9ybWF0aW9uIChhc3NldElkKSB7CiAgICAgIGxldCBhcGlOYW1lID0gJ21pZURhdGFwbGFuZUFwaScKICAgICAgbGV0IHBhdGggPSAnbWV0YWRhdGEvJyArIGFzc2V0SWQKICAgICAgbGV0IHJlcXVlc3RPcHRzID0gewogICAgICAgIHJlc3BvbnNlOiB0cnVlLAogICAgICB9OwogICAgICB0cnkgewogICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMuJEFtcGxpZnkuQVBJLmdldChhcGlOYW1lLCBwYXRoLCByZXF1ZXN0T3B0cyk7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB0aGlzLnNob3dEYXRhcGxhbmVBbGVydCA9IHRydWUKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGZldGNoQXNzZXRzICgpIHsKICAgICAgbGV0IGFwaU5hbWUgPSAnbWllRGF0YXBsYW5lQXBpJwogICAgICBsZXQgcGF0aCA9ICdtZXRhZGF0YScKICAgICAgbGV0IHJlcXVlc3RPcHRzID0gewogICAgICAgIHJlc3BvbnNlOiB0cnVlLAogICAgICB9OwogICAgICB0cnkgewogICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMuJEFtcGxpZnkuQVBJLmdldChhcGlOYW1lLCBwYXRoLCByZXF1ZXN0T3B0cyk7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB0aGlzLnNob3dEYXRhcGxhbmVBbGVydCA9IHRydWUKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgfQogICAgfSwKICAgIGFzeW5jIHB1c2hBc3NldHNUb1RhYmxlKGFzc2V0cykgewogICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYXNzZXRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgdmFyIGFzc2V0SWQ7CiAgICAgICAgaWYgKHR5cGVvZiBhc3NldHNbaV0gPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAvLyBJZiB0aGUgYXNzZXQgbGlzdCBpcyBjb21pbmcgZnJvbSBFbGFzdGljc2VhcmNoLCB3ZSBnZXQgdGhlIGFzc2V0SWQgbGlrZSB0aGlzOgogICAgICAgICAgYXNzZXRJZCA9IGFzc2V0c1tpXS5hc3NldF9pZAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBJZiB0aGUgYXNzZXQgbGlzdCBpcyBjb21pbmcgZnJvbSB0aGUgZGF0YXBsYW5lYXBpLCB3ZSBnZXQgdGhlIGFzc2V0SWQgbGlrZSB0aGlzOgogICAgICAgICAgYXNzZXRJZCA9IGFzc2V0c1tpXQogICAgICAgIH0KICAgICAgICAvLyBJbnZva2UgYW4gYXN5bmNocm9ub3VzIHRhc2sgdG8gYWRkIGFzc2V0cyB0byB0aGUgdGFibGUgaW4gcGFyYWxsZWwgc28gdGhlIHRhYmxlIHVwZGF0ZXMKICAgICAgICAvLyBhcyBmYXN0IGFzIHBvc3NpYmxlLiBGb3IgbGFyZ2UgbWVkaWEgY29sbGVjdGlvbnMgdGhpcyBtYXkgdGFrZSBzZXZlcmFsIHNlY29uZHMuCiAgICAgICAgdGhpcy5wdXNoQXNzZXRUb1RhYmxlKGFzc2V0SWQpCiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBwdXNoQXNzZXRUb1RhYmxlIChhc3NldElkKSB7CiAgICAgIGNvbnN0IGFzc2V0SW5mbyA9IGF3YWl0IHRoaXMuZ2V0QXNzZXRJbmZvcm1hdGlvbihhc3NldElkKTsKICAgICAgbGV0IGNyZWF0ZWQgPSBuZXcgRGF0ZSgwKTsKICAgICAgY3JlYXRlZC5zZXRVVENTZWNvbmRzKGFzc2V0SW5mby5yZXN1bHRzLkNyZWF0ZWQpOwogICAgICBjb25zdCBtZXRhZGF0YV9mb2xkZXIgPSAiL3ByaXZhdGUvYXNzZXRzLyIrYXNzZXRJZAogICAgICBjb25zdCBzb3VyY2VfYnVja2V0ID0gYXNzZXRJbmZvLnJlc3VsdHMuUzNCdWNrZXQ7CiAgICAgIGNvbnN0IHNvdXJjZV9rZXkgPSBhc3NldEluZm8ucmVzdWx0cy5TM0tleTsKICAgICAgbGV0IHMzVXJpID0gJ3MzOi8vJyArIHRoaXMuREFUQVBMQU5FX0JVQ0tFVCArICcvJyArIG1ldGFkYXRhX2ZvbGRlcjsKICAgICAgY29uc3QgZmlsZW5hbWUgPSBzb3VyY2Vfa2V5LnNwbGl0KCIvIikucG9wKCk7CiAgICAgIC8vIFRoZSB0aHVtYm5haWwgaXMgY3JlYXRlZCBieSBNZWRpYSBDb252ZXJ0LCBzZWU6CiAgICAgIC8vIHNvdXJjZS9vcGVyYXRvcnMvdGh1bWJuYWlsL3N0YXJ0X3RodW1ibmFpbC5weQogICAgICBsZXQgdGh1bWJuYWlsUzNLZXkgPSAncHJpdmF0ZS9hc3NldHMvJyArIGFzc2V0SWQgKyAnLycgKyBmaWxlbmFtZS5zdWJzdHJpbmcoMCwgZmlsZW5hbWUubGFzdEluZGV4T2YoIi4iKSkgKyAnX3RodW1ibmFpbC4wMDAwMDAxLmpwZyc7CiAgICAgIGxldCB0aHVtYm5haWxTM0J1Y2tldCA9IHRoaXMuREFUQVBMQU5FX0JVQ0tFVAogICAgICAvLyBJZiBpdCdzIGFuIGltYWdlIHRoZW4gTWVkaWEgQ29udmVydCB3b24ndCBjcmVhdGUgYSB0aHVtYm5haWwuCiAgICAgIC8vIEluIHRoYXQgY2FzZSB3ZSB1c2UgdGhlIHVwbG9hZGVkIGltYWdlIGFzIHRoZSB0aHVtYm5haWwuCiAgICAgIGNvbnN0IHN1cHBvcnRlZF9pbWFnZV90eXBlcyA9IFsiLmpwZyIsICIuanBlZyIsICIudGlmIiwgIi50aWZmIiwgIi5wbmciLCAiLmFwbmciLCAiLmdpZiIsICIuYm1wIiwgIi5zIGd2ZyJdOwogICAgICBjb25zdCBtZWRpYV90eXBlID0gZmlsZW5hbWUuc3Vic3RyaW5nKGZpbGVuYW1lLmxhc3RJbmRleE9mKCIuIikpLnRvTG93ZXJDYXNlKCk7CiAgICAgIGlmIChzdXBwb3J0ZWRfaW1hZ2VfdHlwZXMuaW5jbHVkZXMobWVkaWFfdHlwZSkpIHsKICAgICAgICAvLyB1c2UgdGhlIHVwbG9hZGVkIGltYWdlIGFzIGEgdGh1bWJuYWlsCiAgICAgICAgdGh1bWJuYWlsUzNLZXkgPSBzb3VyY2Vfa2V5OwogICAgICAgIHRodW1ibmFpbFMzQnVja2V0ID0gc291cmNlX2J1Y2tldDsKICAgICAgfQogICAgICBsZXQgW3RodW1ibmFpbCwgd29ya2Zsb3dTdGF0dXNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW3RoaXMuZ2V0QXNzZXRUaHVtYm5haWwodGh1bWJuYWlsUzNCdWNrZXQsIHRodW1ibmFpbFMzS2V5KSwgdGhpcy5nZXRBc3NldFdvcmtmbG93U3RhdHVzKGFzc2V0SWQpXSk7CiAgICAgIGlmICh3b3JrZmxvd1N0YXR1c1swXSAmJiB0aHVtYm5haWwpCiAgICAgIHsKICAgICAgICB0aGlzLmFzc2V0X2xpc3QucHVzaCh7CiAgICAgICAgICBhc3NldF9pZDogYXNzZXRJZCwKICAgICAgICAgIENyZWF0ZWQ6IGNyZWF0ZWQsCiAgICAgICAgICBGaWxlbmFtZTogZmlsZW5hbWUsCiAgICAgICAgICBzdGF0dXM6IHdvcmtmbG93U3RhdHVzWzBdLlN0YXR1cywKICAgICAgICAgIHN0YXRlX21hY2hpbmVfY29uc29sZV9saW5rOiAiaHR0cHM6Ly8iICsgdGhpcy5BV1NfUkVHSU9OICsgIi5jb25zb2xlLmF3cy5hbWF6b24uY29tL3N0YXRlcy9ob21lP3JlZ2lvbj0iICsgdGhpcy5BV1NfUkVHSU9OICsgIiMvZXhlY3V0aW9ucy9kZXRhaWxzLyIgKyB3b3JrZmxvd1N0YXR1c1swXS5TdGF0ZU1hY2hpbmVFeGVjdXRpb25Bcm4sCiAgICAgICAgICBzM191cmk6IHMzVXJpLAogICAgICAgICAgc2lnbmVkVXJsOiB0aHVtYm5haWwsCiAgICAgICAgICB0aHVtYm5haWxJRDogJ18nICsgYXNzZXRJZCwKICAgICAgICAgIFRodW1ibmFpbDogJycsCiAgICAgICAgICBBY3Rpb25zOiAnUnVuJwogICAgICAgIH0pCiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgcmV0cmlldmVBbmRGb3JtYXRBc3NzZXRzICgpIHsKICAgICAgbGV0IGRhdGEgPSBhd2FpdCB0aGlzLmZldGNoQXNzZXRzKCk7CiAgICAgIGxldCBhc3NldHMgPSBkYXRhLmFzc2V0czsKICAgICAgaWYgKGFzc2V0cy5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLm5vQXNzZXRzID0gdHJ1ZTsKICAgICAgICB0aGlzLm5vU2VhcmNoUmVzdWx0cyA9IGZhbHNlOwogICAgICAgIHRoaXMuaXNCdXN5ID0gZmFsc2U7CiAgICAgIH0KICAgICAgZWxzZSB7CiAgICAgICAgdGhpcy5ub0Fzc2V0cyA9IGZhbHNlOwogICAgICAgIHRoaXMucHVzaEFzc2V0c1RvVGFibGUoYXNzZXRzKTsKICAgICAgICB0aGlzLmlzQnVzeSA9IGZhbHNlCiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["Collection.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsJA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Collection.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <div class=\"headerTextBackground\">\n      <Header :is-collection-active=\"true\" />\n      <b-container fluid>\n        <b-alert\n          v-model=\"showElasticSearchAlert\"\n          variant=\"danger\"\n          dismissible\n        >\n          Elasticsearch error. Please check browser and elasticsearch access logs.\n        </b-alert>\n        <b-alert\n          v-model=\"showDataplaneAlert\"\n          variant=\"danger\"\n          dismissible\n        >\n          Dataplane Error. Please check browser and dataplane logs.\n        </b-alert>\n        <b-alert\n          v-model=\"showDeletedAlert\"\n          variant=\"success\"\n          dismissible\n          fade\n        >\n          Successfully Deleted Asset\n        </b-alert>\n        <b-row align-h=\"center\">\n          <h1>Media Collection</h1>\n        </b-row>\n        <b-row\n          align-h=\"center\"\n          class=\"tagline\"\n        >\n          <b>Discover insights in your media by searching for keywords, objects, or even people.</b>\n        </b-row>\n        <b-row\n          class=\"my-1\"\n          align-v=\"center\"\n          align-h=\"center\"\n        >\n          <b-col sm=\"5\">\n            <input\n              v-model=\"user_defined_query\"\n              type=\"text\"\n              placeholder=\"Search Collection...\"\n              @keyup.enter=\"searchCollection\"\n            >\n          </b-col>\n          <b-col sm=\"1\">\n            <b-button\n              size=\"lg\"\n              @click=\"searchCollection\"\n            >\n              Search\n            </b-button>\n          </b-col>\n        </b-row>\n      </b-container>\n    </div>\n    <b-container\n      fluid\n      class=\"resultsTable\"\n    >\n      <b-row>\n        <b-col>\n          <div>\n            <div class=\"column\">\n              <b-row class=\"my-1\">\n                <b-col>\n                  <b-table\n                    striped\n                    hover\n                    fixed\n                    responsive\n                    show-empty\n                    :fields=\"fields\"\n                    :items=\"asset_list\"\n                    :sort-by.sync=\"sortBy\"\n                    :sort-desc.sync=\"sortDesc\"\n                    :current-page=\"currentPage\"\n                    :per-page=\"perPage\"\n                  >\n                    <template #cell(Thumbnail)=\"data\">\n                      <VideoThumbnail\n                        :thumbnail-i-d=\"data.item.thumbnailID\"\n                        :signed-url=\"data.item.signedUrl\"\n                      />\n                    </template>\n                    <template #cell(Created)=\"data\">\n                      {{ data.item.Created.toLocaleDateString() }}<br>\n                      {{ data.item.Created.toLocaleTimeString() }}\n                    </template>\n                    <template #cell(status)=\"data\">\n                      <!-- open link in new tab -->\n                      <a v-if=\"data.item.status !== 'Queued'\" href=\"\" @click.stop.prevent=\"openWindow(data.item.state_machine_console_link)\">{{ data.item.status }}</a>\n                      <div v-if=\"data.item.status === 'Queued'\">\n                        {{ data.item.status }}\n                      </div>\n                    </template>\n                    <template #cell(Actions)=\"data\">\n                      <b-link\n                        :href=\"(`/analysis/${data.item.asset_id}`)\"\n                      >\n                        Analyze\n                      </b-link>\n                      <br>\n                      <b-link\n                        class=\"text-danger\"\n                        @click=\"deleteAsset(`${data.item.asset_id}`)\"\n                      >\n                        Delete\n                      </b-link>\n                    </template>\n                  </b-table>\n                  <div\n                    v-if=\"noAssets\"\n                  >\n                    <p>\n                      Looks like no assets have been uploaded! Try uploading <a href=\"upload\" rel=\"noopener noreferrer\">here</a>.\n                    </p>\n                  </div>\n                  <div\n                    v-if=\"isBusy\"\n                    class=\"wrapper\"\n                  >\n                    <Loading v-if=\"isBusy\" />\n                    <p class=\"text-muted\">\n                      (Loading...)\n                    </p>\n                  </div>\n                </b-col>\n              </b-row>\n              <b-row align-h=\"center\">\n                <b-pagination\n                  v-model=\"currentPage\"\n                  :total-rows=\"totalRows\"\n                  :per-page=\"perPage\"\n                  class=\"my-0\"\n                />\n              </b-row>\n            </div>\n          </div>\n        </b-col>\n      </b-row>\n    </b-container>\n  </div>\n</template>\n\n<script>\n  import Header from '@/components/Header.vue'\n  import VideoThumbnail from '@/components/VideoThumbnail.vue'\n  import Loading from '@/components/Loading.vue'\n\n  export default {\n    name: \"Run\",\n    components: {\n      Header,\n      Loading,\n      VideoThumbnail\n    },\n    data() {\n      return {\n        showElasticSearchAlert: false,\n        showDataplaneAlert: false,\n        showDeletedAlert: 0,\n        noAssets: null,\n        currentPage: 1,\n        perPage: 10,\n        isBusy: false,\n        user_defined_query: \"\",\n        asset_list: [],\n        sortBy: 'Created',\n        sortDesc: true,\n        fields: [\n            {\n              'Thumbnail': {\n              label: \"Thumbnail\",\n              sortable: false\n              }\n            },\n            {\n              'Filename': {\n              label: \"File Name\",\n              sortable: true,\n              tdClass: [\"tableWordWrap\"]\n              }\n            },\n            {\n              'status': {\n              label: \"Status\",\n              sortable: true,\n              tdClass: [\"tableWordWrap\"]\n              }\n            },\n            {\n            'asset_id': {\n              label: 'Asset ID',\n              sortable: false,\n              tdClass: [\"tableWordWrap\"]\n              }\n            },\n            {\n              'Created': {\n              label: \"Created\",\n              sortable: true,\n              tdClass: [\"tableWordWrap\"]\n              }\n            },\n            {\n              'Actions': {\n              label: 'Actions',\n              sortable: false\n              }\n            }\n        ]\n      }\n    },\n    computed: {\n      totalRows() {\n        return this.asset_list.length\n      }\n    },\n    created: function () {\n      this.isBusy = true;\n      this.retrieveAndFormatAsssets()\n    },\n    methods: {\n      openWindow: function (url) {\n        window.open(url, \"_blank\", \"noopener,noreferer\");\n      },\n      async deleteAsset(assetId) {\n        let apiName = 'mieDataplaneApi'\n        let path = 'metadata/' + assetId\n        let requestOpts = {\n          response: true,\n        };\n        try {\n          await this.$Amplify.API.del(apiName, path, requestOpts);\n          this.showDeletedAlert = 5;\n          this.asset_list = [];\n          this.retrieveAndFormatAsssets()\n        } catch (error) {\n          this.showDataplaneAlert = true\n          console.log(error)\n        }\n      },\n      async elasticsearchQuery (query) {\n            let apiName = 'contentAnalysisElasticsearch';\n            let path = '/_search';\n            let apiParams = {\n              headers: {'Content-Type': 'application/json'},\n              body: {\n              \"aggs\" : {\n                \"distinct_assets\" : {\n                  \"terms\" : { \"field\" : \"AssetId.keyword\", \"size\" : 10000 }\n                }\n                }\n              },\n              queryStringParameters: {'q': query, '_source': 'AssetId'}\n            };\n            let response = await this.$Amplify.API.post(apiName, path, apiParams);\n            if (!response) {\n              this.showElasticSearchAlert = true\n            }\n            else {\n              this.noAssets = false;\n              return await response;\n        }\n      },\n      async searchCollection () {\n          this.noSearchResults = false;\n          this.isBusy = true;\n          let query = this.user_defined_query;\n          // if search is empty string then get asset list from dataplane instead of Elasticsearch.\n          if (query === \"\") {\n            this.showElasticSearchAlert = false;\n            this.asset_list = [];\n            this.retrieveAndFormatAsssets();\n            this.isBusy = false;\n          }\n          else {\n            // Get the list of assets that contain metadata matching the user-specified search query.\n            let elasticData = await this.elasticsearchQuery(query);\n            if (elasticData.hits.total === 0) {\n              // the search returned no data\n              this.asset_list = [];\n              this.noSearchResults = true;\n              this.isBusy = false;\n            }\n            else {\n              let assets = [];\n              this.asset_list = [];\n              this.noSearchResults = false;\n              let buckets = elasticData.aggregations.distinct_assets.buckets;\n              for (var i = 0, len = buckets.length; i < len; i++) {\n                let assetId = buckets[i].key;\n                let assetInfo = await this.getAssetInformation(assetId);\n                if (assetInfo !== null) {\n                  assets.push(assetInfo)\n                }\n            }\n            if (assets.length === 0) {\n              this.noSearchResults = true;\n              this.isBusy = false\n            }\n            else {\n              this.pushAssetsToTable(assets);\n              this.isBusy = false\n            }\n          }\n        }\n      },\n      async getAssetWorkflowStatus (assetId) {\n        let apiName = 'mieWorkflowApi'\n        let path = 'workflow/execution/asset/' + assetId\n        let requestOpts = {\n          response: true,\n        };\n        try {\n          let response = await this.$Amplify.API.get(apiName, path, requestOpts);\n          return response.data\n        } catch (error) {\n          console.log(error)\n        }\n      },\n      async getAssetThumbnail (bucket, s3Key) {\n        const data = { \"S3Bucket\": bucket, \"S3Key\": s3Key };\n        let apiName = 'mieDataplaneApi'\n        let path = 'download'\n        let requestOpts = {\n          body: data,\n          response: true,\n          responseType: 'text'\n        };\n        try {\n          let response = await this.$Amplify.API.post(apiName, path, requestOpts);\n          return response.data\n        } catch (error) {\n          this.showDataplaneAlert = true\n          console.log(error)\n        }\n      },\n      async getAssetInformation (assetId) {\n        let apiName = 'mieDataplaneApi'\n        let path = 'metadata/' + assetId\n        let requestOpts = {\n          response: true,\n        };\n        try {\n          let response = await this.$Amplify.API.get(apiName, path, requestOpts);\n          return response.data\n        } catch (error) {\n          this.showDataplaneAlert = true\n          console.log(error)\n        }\n      },\n      async fetchAssets () {\n        let apiName = 'mieDataplaneApi'\n        let path = 'metadata'\n        let requestOpts = {\n          response: true,\n        };\n        try {\n          let response = await this.$Amplify.API.get(apiName, path, requestOpts);\n          return response.data\n        } catch (error) {\n          this.showDataplaneAlert = true\n          console.log(error)\n        }\n      },\n      async pushAssetsToTable(assets) {\n        for (var i = 0, len = assets.length; i < len; i++) {\n          var assetId;\n          if (typeof assets[i] === 'object') {\n            // If the asset list is coming from Elasticsearch, we get the assetId like this:\n            assetId = assets[i].asset_id\n          } else {\n            // If the asset list is coming from the dataplaneapi, we get the assetId like this:\n            assetId = assets[i]\n          }\n          // Invoke an asynchronous task to add assets to the table in parallel so the table updates\n          // as fast as possible. For large media collections this may take several seconds.\n          this.pushAssetToTable(assetId)\n        }\n      },\n      async pushAssetToTable (assetId) {\n        const assetInfo = await this.getAssetInformation(assetId);\n        let created = new Date(0);\n        created.setUTCSeconds(assetInfo.results.Created);\n        const metadata_folder = \"/private/assets/\"+assetId\n        const source_bucket = assetInfo.results.S3Bucket;\n        const source_key = assetInfo.results.S3Key;\n        let s3Uri = 's3://' + this.DATAPLANE_BUCKET + '/' + metadata_folder;\n        const filename = source_key.split(\"/\").pop();\n        // The thumbnail is created by Media Convert, see:\n        // source/operators/thumbnail/start_thumbnail.py\n        let thumbnailS3Key = 'private/assets/' + assetId + '/' + filename.substring(0, filename.lastIndexOf(\".\")) + '_thumbnail.0000001.jpg';\n        let thumbnailS3Bucket = this.DATAPLANE_BUCKET\n        // If it's an image then Media Convert won't create a thumbnail.\n        // In that case we use the uploaded image as the thumbnail.\n        const supported_image_types = [\".jpg\", \".jpeg\", \".tif\", \".tiff\", \".png\", \".apng\", \".gif\", \".bmp\", \".s gvg\"];\n        const media_type = filename.substring(filename.lastIndexOf(\".\")).toLowerCase();\n        if (supported_image_types.includes(media_type)) {\n          // use the uploaded image as a thumbnail\n          thumbnailS3Key = source_key;\n          thumbnailS3Bucket = source_bucket;\n        }\n        let [thumbnail, workflowStatus] = await Promise.all([this.getAssetThumbnail(thumbnailS3Bucket, thumbnailS3Key), this.getAssetWorkflowStatus(assetId)]);\n        if (workflowStatus[0] && thumbnail)\n        {\n          this.asset_list.push({\n            asset_id: assetId,\n            Created: created,\n            Filename: filename,\n            status: workflowStatus[0].Status,\n            state_machine_console_link: \"https://\" + this.AWS_REGION + \".console.aws.amazon.com/states/home?region=\" + this.AWS_REGION + \"#/executions/details/\" + workflowStatus[0].StateMachineExecutionArn,\n            s3_uri: s3Uri,\n            signedUrl: thumbnail,\n            thumbnailID: '_' + assetId,\n            Thumbnail: '',\n            Actions: 'Run'\n          })\n        }\n      },\n\n      async retrieveAndFormatAsssets () {\n        let data = await this.fetchAssets();\n        let assets = data.assets;\n        if (assets.length === 0) {\n          this.noAssets = true;\n          this.noSearchResults = false;\n          this.isBusy = false;\n        }\n        else {\n          this.noAssets = false;\n          this.pushAssetsToTable(assets);\n          this.isBusy = false\n        }\n      }\n    }\n  }\n</script>\n\n<style>\n  td {\n    vertical-align: middle;\n  }\n  .headerTextBackground {\n    background-color: #191918;\n    max-width: 100%;\n    height: auto;\n    padding-bottom: 1%;\n  }\n  .resultsTable {\n    padding-top: 1%;\n  }\n  h1 {\n    color: #ED900E;\n  }\n  a {\n    color: #ED900E;\n  }\n  .tagline {\n    color: white\n  }\n  .btn-orange {\n    color: #ED900E\n  }\n  .btn-red {\n    color: red\n  }\n  .tableWordWrap {\n    white-space:normal;\n    word-break:break-all;\n    overflow: hidden;\n    text-overflow:ellipsis;\n  }\n</style>\n"]}]}