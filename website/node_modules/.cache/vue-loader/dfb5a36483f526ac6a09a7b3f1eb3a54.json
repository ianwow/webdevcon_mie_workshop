{"remainingRequest":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ianwow/development/aws-content-analysis/source/website/src/components/ComprehendEntities.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ianwow/development/aws-content-analysis/source/website/src/components/ComprehendEntities.vue","mtime":1623875433270},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/cache-loader/dist/cjs.js","mtime":1633407346687},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/thread-loader/dist/cjs.js","mtime":1633407346686},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/babel-loader/lib/index.js","mtime":1633407348173},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/cache-loader/dist/cjs.js","mtime":1633407346687},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/vue-loader/lib/index.js","mtime":1633407348650}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMb2FkaW5nIGZyb20gJ0AvY29tcG9uZW50cy9Mb2FkaW5nLnZ1ZScKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJFbnRpdGllcyIsCiAgY29tcG9uZW50czogewogICAgTG9hZGluZwogICAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgQ29uZmlkZW5jZTogOTAsCiAgICAgIHNvcnRCeTogIkJlZ2luT2Zmc2V0IiwKICAgICAgZmllbGRzOiBbCiAgICAgICAgeyBrZXk6ICdFbnRpdHlUZXh0Jywgc29ydGFibGU6IHRydWUgfSwKICAgICAgICB7IGtleTogJ0VudGl0eVR5cGUnLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgIHsga2V5OiAnQ29uZmlkZW5jZScsIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgeyBrZXk6ICdCZWdpbk9mZnNldCcsIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgeyBrZXk6ICdFbmRPZmZzZXQnLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICBdLAogICAgICBlbnRpdGllczogW10sCiAgICAgIGlzQnVzeTogZmFsc2UsCiAgICAgIG9wZXJhdG9yOiAiZW50aXRpZXMiCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwU3RhdGUoWydwbGF5ZXInXSksCiAgfSwKICBkZWFjdGl2YXRlZDogZnVuY3Rpb24gKCkgewogICAgY29uc29sZS5sb2coJ2RlYWN0aXZhdGVkIGNvbXBvbmVudDonLCB0aGlzLm9wZXJhdG9yKQogICAgLy8gY2xlYXJpbmcgdGhpcyB2YWx1ZSBhZnRlciBldmVyeSBkZWFjdGl2YXRpb24gc28gd2UgZG9udCBjYXJyeSB0aGlzIGh1Z2UgYW1vdW50IG9mIGRhdGEgaW4gbWVtb3J5CiAgICB0aGlzLmVudGl0aWVzID0gW10KICB9LAogIGFjdGl2YXRlZDogZnVuY3Rpb24gKCkgewogICAgY29uc29sZS5sb2coJ2FjdGl2YXRlZCBjb21wb25lbnQ6JywgdGhpcy5vcGVyYXRvcik7CiAgICB0aGlzLmZldGNoQXNzZXREYXRhKCk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLmVudGl0aWVzID0gW10KICB9LAogIG1ldGhvZHM6IHsKICAgIHVwZGF0ZUNvbmZpZGVuY2UgKGV2ZW50KSB7CiAgICAgIHRoaXMuaXNCdXN5ID0gdHJ1ZTsKICAgICAgdGhpcy5lbnRpdGllcyA9IFtdOwogICAgICB0aGlzLkNvbmZpZGVuY2UgPSBldmVudC50YXJnZXQudmFsdWU7CiAgICAgIHRoaXMuZmV0Y2hBc3NldERhdGEoKQogICAgfSwKICAgIGFzeW5jIGZldGNoQXNzZXREYXRhICgpIHsKICAgICAgbGV0IHF1ZXJ5ID0gJ0Fzc2V0SWQ6Jyt0aGlzLiRyb3V0ZS5wYXJhbXMuYXNzZXRfaWQrJyBDb25maWRlbmNlOj4nK3RoaXMuQ29uZmlkZW5jZSsnIF9pbmRleDptaWVlbnRpdGllcyc7CiAgICAgIGxldCBhcGlOYW1lID0gJ2NvbnRlbnRBbmFseXNpc0VsYXN0aWNzZWFyY2gnOwogICAgICBsZXQgcGF0aCA9ICcvX3NlYXJjaCc7CiAgICAgIGxldCBhcGlQYXJhbXMgPSB7CiAgICAgICAgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9LAogICAgICAgIHF1ZXJ5U3RyaW5nUGFyYW1ldGVyczogeydxJzogcXVlcnksICdkZWZhdWx0X29wZXJhdG9yJzogJ0FORCcsICdzaXplJzogMTAwMDB9CiAgICAgIH07CiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMuJEFtcGxpZnkuQVBJLmdldChhcGlOYW1lLCBwYXRoLCBhcGlQYXJhbXMpOwogICAgICBpZiAoIXJlc3BvbnNlKSB7CiAgICAgICAgdGhpcy5zaG93RWxhc3RpY1NlYXJjaEFsZXJ0ID0gdHJ1ZQogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCByZXNwb25zZTsKICAgICAgICBsZXQgZGF0YSA9IHJlc3VsdC5oaXRzLmhpdHM7CiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGRhdGEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgIHRoaXMuZW50aXRpZXMucHVzaCh7ICJFbnRpdHlUZXh0IjogZGF0YVtpXS5fc291cmNlLkVudGl0eVRleHQsICJFbnRpdHlUeXBlIjogZGF0YVtpXS5fc291cmNlLkVudGl0eVR5cGUsICJDb25maWRlbmNlIjogZGF0YVtpXS5fc291cmNlLkNvbmZpZGVuY2UsICJCZWdpbk9mZnNldCI6IGRhdGFbaV0uX3NvdXJjZS5CZWdpbk9mZnNldCwgIkVuZE9mZnNldCI6IGRhdGFbaV0uX3NvdXJjZS5FbmRPZmZzZXR9KQogICAgICAgIH0KICAgICAgICB0aGlzLmlzQnVzeSA9IGZhbHNlCiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["ComprehendEntities.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ComprehendEntities.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div class=\"wrapper\">\n      Confidence Threshold<br>\n      <input\n        type=\"range\"\n        value=\"90\"\n        min=\"55\"\n        max=\"99\"\n        step=\"1\"\n        @click=\"updateConfidence\"\n      >\n      {{ Confidence }}%<br>\n    </div>\n    <div\n      v-if=\"isBusy\"\n      class=\"wrapper\"\n    >\n      <Loading />\n    </div>\n    <div class=\"wrapper\">\n      <b-table\n        responsive\n        fixed\n        :items=\"entities\"\n        :fields=\"fields\"\n        :sort-by=\"sortBy\"\n      >\n        <template #cell(Confidence)=\"data\">\n          {{ (data.item.Confidence * 1).toFixed(2) }}\n        </template>\n      </b-table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Loading from '@/components/Loading.vue'\nimport { mapState } from 'vuex'\n\nexport default {\n  name: \"Entities\",\n  components: {\n    Loading\n    },\n  data() {\n    return {\n      Confidence: 90,\n      sortBy: \"BeginOffset\",\n      fields: [\n        { key: 'EntityText', sortable: true },\n        { key: 'EntityType', sortable: true },\n        { key: 'Confidence', sortable: true },\n        { key: 'BeginOffset', sortable: true },\n        { key: 'EndOffset', sortable: true },\n      ],\n      entities: [],\n      isBusy: false,\n      operator: \"entities\"\n    }\n  },\n  computed: {\n    ...mapState(['player']),\n  },\n  deactivated: function () {\n    console.log('deactivated component:', this.operator)\n    // clearing this value after every deactivation so we dont carry this huge amount of data in memory\n    this.entities = []\n  },\n  activated: function () {\n    console.log('activated component:', this.operator);\n    this.fetchAssetData();\n  },\n  beforeDestroy: function () {\n    this.entities = []\n  },\n  methods: {\n    updateConfidence (event) {\n      this.isBusy = true;\n      this.entities = [];\n      this.Confidence = event.target.value;\n      this.fetchAssetData()\n    },\n    async fetchAssetData () {\n      let query = 'AssetId:'+this.$route.params.asset_id+' Confidence:>'+this.Confidence+' _index:mieentities';\n      let apiName = 'contentAnalysisElasticsearch';\n      let path = '/_search';\n      let apiParams = {\n        headers: {'Content-Type': 'application/json'},\n        queryStringParameters: {'q': query, 'default_operator': 'AND', 'size': 10000}\n      };\n      let response = await this.$Amplify.API.get(apiName, path, apiParams);\n      if (!response) {\n        this.showElasticSearchAlert = true\n      }\n      else {\n        let result = await response;\n        let data = result.hits.hits;\n        for (var i = 0, len = data.length; i < len; i++) {\n          this.entities.push({ \"EntityText\": data[i]._source.EntityText, \"EntityType\": data[i]._source.EntityType, \"Confidence\": data[i]._source.Confidence, \"BeginOffset\": data[i]._source.BeginOffset, \"EndOffset\": data[i]._source.EndOffset})\n        }\n        this.isBusy = false\n      }\n    }\n  }\n}\n</script>\n"]}]}