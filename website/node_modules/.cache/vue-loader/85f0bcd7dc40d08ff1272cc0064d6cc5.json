{"remainingRequest":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ianwow/development/aws-content-analysis/source/website/src/components/vue-dropzone.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ianwow/development/aws-content-analysis/source/website/src/components/vue-dropzone.vue","mtime":1623875433282},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/cache-loader/dist/cjs.js","mtime":1633407346687},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/babel-loader/lib/index.js","mtime":1633407348173},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/cache-loader/dist/cjs.js","mtime":1633407346687},{"path":"/Users/ianwow/development/aws-content-analysis/source/website/node_modules/vue-loader/lib/index.js","mtime":1633407348650}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBEcm9wem9uZSBmcm9tICdkcm9wem9uZScgLy9lc2xpbnQtZGlzYWJsZS1saW5lCgpEcm9wem9uZS5hdXRvRGlzY292ZXIgPSBmYWxzZQoKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBpZDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICBkZWZhdWx0Oidkcm9wem9uZScKICAgIH0sCiAgICBvcHRpb25zOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBpbmNsdWRlU3R5bGluZzogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlLAogICAgICByZXF1aXJlZDogZmFsc2UKICAgIH0sCiAgICBhd3NzMzogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIGRlc3Ryb3lEcm9wem9uZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlLAogICAgICByZXF1aXJlZDogZmFsc2UKICAgIH0sCiAgICBkdXBsaWNhdGVDaGVjazogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZSwKICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICB9LAogICAgdXNlQ3VzdG9tU2xvdDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZSwKICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNTMzogZmFsc2UsCiAgICAgIGlzUzNPdmVycmlkZXNTZXJ2ZXJQcm9wYWdhdGlvbjogZmFsc2UsCiAgICAgIHdhc1F1ZXVlQXV0b1Byb2Nlc3M6IHRydWUsCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgZHJvcHpvbmVTZXR0aW5ncygpIHsKICAgICAgbGV0IGRlZmF1bHRWYWx1ZXMgPSB7CiAgICAgICAgdGh1bWJuYWlsV2lkdGg6IDIwMCwKICAgICAgICB0aHVtYm5haWxIZWlnaHQ6IDIwMAogICAgICB9CiAgICAgIE9iamVjdC5rZXlzKHRoaXMub3B0aW9ucykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHsKICAgICAgICBkZWZhdWx0VmFsdWVzW2tleV0gPSB0aGlzLm9wdGlvbnNba2V5XQogICAgICB9LCB0aGlzKQogICAgICBpZiAodGhpcy5hd3NzMyAhPT0gbnVsbCkgewogICAgICAgIGRlZmF1bHRWYWx1ZXNbJ2F1dG9Qcm9jZXNzUXVldWUnXSA9IGZhbHNlCiAgICAgICAgdGhpcy5pc1MzID0gdHJ1ZSAvL2VzbGludC1kaXNhYmxlLWxpbmUKICAgICAgICB0aGlzLmlzUzNPdmVycmlkZXNTZXJ2ZXJQcm9wYWdhdGlvbiA9ICh0aGlzLmF3c3MzLnNlbmRGaWxlVG9TZXJ2ZXIgPT09IGZhbHNlKSAgLy9lc2xpbnQtZGlzYWJsZS1saW5lCiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5hdXRvUHJvY2Vzc1F1ZXVlICE9PSB1bmRlZmluZWQpCiAgICAgICAgICB0aGlzLndhc1F1ZXVlQXV0b1Byb2Nlc3MgPSB0aGlzLm9wdGlvbnMuYXV0b1Byb2Nlc3NRdWV1ZSAvL2VzbGludC1kaXNhYmxlLWxpbmUKCiAgICAgICAgaWYgKHRoaXMuaXNTM092ZXJyaWRlc1NlcnZlclByb3BhZ2F0aW9uKSB7CiAgICAgICAgICBkZWZhdWx0VmFsdWVzWyd1cmwnXSA9IChmaWxlcykgPT4gewogICAgICAgICAgICByZXR1cm4gZmlsZXNbMF0uczNVcmw7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBkZWZhdWx0VmFsdWVzCiAgICB9CiAgfSwKICBtb3VudGVkICgpIHsKICAgIGlmICh0aGlzLiRpc1NlcnZlciAmJiB0aGlzLmhhc0JlZW5Nb3VudGVkKSB7CiAgICAgIHJldHVybgogICAgfQogICAgdGhpcy5oYXNCZWVuTW91bnRlZCA9IHRydWUKCiAgICB0aGlzLmRyb3B6b25lID0gbmV3IERyb3B6b25lKHRoaXMuJHJlZnMuZHJvcHpvbmVFbGVtZW50LCB0aGlzLmRyb3B6b25lU2V0dGluZ3MpCiAgICBsZXQgdm0gPSB0aGlzCgogICAgdGhpcy5kcm9wem9uZS5vbigndGh1bWJuYWlsJywgZnVuY3Rpb24oZmlsZSwgZGF0YVVybCkgewogICAgICB2bS4kZW1pdCgndmRyb3B6b25lLXRodW1ibmFpbCcsIGZpbGUsIGRhdGFVcmwpCiAgICB9KQoKICAgIHRoaXMuZHJvcHpvbmUub24oJ2FkZGVkZmlsZScsIGZ1bmN0aW9uKGZpbGUpIHsKICAgICAgaWYgKHZtLmR1cGxpY2F0ZUNoZWNrKSB7CiAgICAgICAgaWYgKHRoaXMuZmlsZXMubGVuZ3RoKSB7CiAgICAgICAgICB2YXIgX2ksIF9sZW47CiAgICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IHRoaXMuZmlsZXMubGVuZ3RoOyBfaSA8IF9sZW4gLSAxOyBfaSsrKSAvLyAtMSB0byBleGNsdWRlIGN1cnJlbnQgZmlsZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZih0aGlzLmZpbGVzW19pXS5uYW1lID09PSBmaWxlLm5hbWUgJiYgdGhpcy5maWxlc1tfaV0uc2l6ZSA9PT0gZmlsZS5zaXplICYmIHRoaXMuZmlsZXNbX2ldLmxhc3RNb2RpZmllZERhdGUudG9TdHJpbmcoKSA9PT0gZmlsZS5sYXN0TW9kaWZpZWREYXRlLnRvU3RyaW5nKCkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVGaWxlKGZpbGUpOwogICAgICAgICAgICAgICAgICAgIHZtLiRlbWl0KCd2ZHJvcHpvbmUtZHVwbGljYXRlLWZpbGUnLCBmaWxlKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB2bS4kZW1pdCgndmRyb3B6b25lLWZpbGUtYWRkZWQnLCBmaWxlKQogICAgICBpZiAodm0uaXNTMyAmJiB2bS53YXNRdWV1ZUF1dG9Qcm9jZXNzICYmICEgZmlsZS5tYW51YWxseUFkZGVkKSB7CiAgICAgICAgdm0uZ2V0U2lnbmVkQW5kVXBsb2FkVG9TMyhmaWxlKTsKICAgICAgfQogICAgfSkKCiAgICB0aGlzLmRyb3B6b25lLm9uKCdhZGRlZGZpbGVzJywgZnVuY3Rpb24oZmlsZXMpIHsKICAgICAgdm0uJGVtaXQoJ3Zkcm9wem9uZS1maWxlcy1hZGRlZCcsIGZpbGVzKQogICAgfSkKCiAgICB0aGlzLmRyb3B6b25lLm9uKCdyZW1vdmVkZmlsZScsIGZ1bmN0aW9uKGZpbGUpIHsKICAgICAgdm0uJGVtaXQoJ3Zkcm9wem9uZS1yZW1vdmVkLWZpbGUnLCBmaWxlKQogICAgICBpZiAoZmlsZS5tYW51YWxseUFkZGVkICYmIHZtLmRyb3B6b25lLm9wdGlvbnMubWF4RmlsZXMgIT09IG51bGwpIHZtLmRyb3B6b25lLm9wdGlvbnMubWF4RmlsZXMrKwogICAgfSkKCiAgICB0aGlzLmRyb3B6b25lLm9uKCdzdWNjZXNzJywgZnVuY3Rpb24oZmlsZSwgcmVzcG9uc2UpIHsKICAgICAgdm0uJGVtaXQoJ3Zkcm9wem9uZS1zdWNjZXNzJywgZmlsZSwgcmVzcG9uc2UpCiAgICAgIGlmICh2bS5pc1MzKSB7CiAgICAgICAgaWYodm0uaXNTM092ZXJyaWRlc1NlcnZlclByb3BhZ2F0aW9uKXsKICAgICAgICAgIHZhciB4bWxSZXNwb25zZSA9IChuZXcgd2luZG93LkRPTVBhcnNlcigpKS5wYXJzZUZyb21TdHJpbmcocmVzcG9uc2UsICJ0ZXh0L3htbCIpOwogICAgICAgICAgdmFyIHMzT2JqZWN0TG9jYXRpb24gPSB4bWxSZXNwb25zZS5maXJzdENoaWxkLmNoaWxkcmVuWzBdLmlubmVySFRNTDsKICAgICAgICAgIHZtLiRlbWl0KCd2ZHJvcHpvbmUtczMtdXBsb2FkLXN1Y2Nlc3MnLCBzM09iamVjdExvY2F0aW9uKTsKICAgICAgICB9CiAgICAgICAgICBpZiAodm0ud2FzUXVldWVBdXRvUHJvY2VzcykKICAgICAgICAgICAgdm0uc2V0T3B0aW9uKCdhdXRvUHJvY2Vzc1F1ZXVlJywgZmFsc2UpOwogICAgICB9CiAgICB9KQoKICAgIHRoaXMuZHJvcHpvbmUub24oJ3N1Y2Nlc3NtdWx0aXBsZScsIGZ1bmN0aW9uKGZpbGUsIHJlc3BvbnNlKSB7CiAgICAgIHZtLiRlbWl0KCd2ZHJvcHpvbmUtc3VjY2Vzcy1tdWx0aXBsZScsIGZpbGUsIHJlc3BvbnNlKQogICAgfSkKCiAgICB0aGlzLmRyb3B6b25lLm9uKCdlcnJvcicsIGZ1bmN0aW9uKGZpbGUsIG1lc3NhZ2UsIHhocikgewogICAgICB2bS4kZW1pdCgndmRyb3B6b25lLWVycm9yJywgZmlsZSwgbWVzc2FnZSwgeGhyKQogICAgICBpZiAodGhpcy5pc1MzKQogICAgICAgIHZtLiRlbWl0KCd2ZHJvcHpvbmUtczMtdXBsb2FkLWVycm9yJyk7CiAgICB9KQoKICAgIHRoaXMuZHJvcHpvbmUub24oJ2Vycm9ybXVsdGlwbGUnLCBmdW5jdGlvbihmaWxlcywgbWVzc2FnZSwgeGhyKSB7CiAgICAgIHZtLiRlbWl0KCd2ZHJvcHpvbmUtZXJyb3ItbXVsdGlwbGUnLCBmaWxlcywgbWVzc2FnZSwgeGhyKQogICAgfSkKICAgIGRlbGV0ZSB0aGlzLmRyb3B6b25lWydzdWJtaXRSZXF1ZXN0J107CiAgICB0aGlzLmRyb3B6b25lLnN1Ym1pdFJlcXVlc3QgPSBmdW5jdGlvbigpIHsKICAgICAgLy8gRHJvcHpvbmUncyB4aHIgZm9ybWF0dGVkIHVwbG9hZCByZXF1ZXN0IGhhcyBiZWVuCiAgICAgIC8vIHJlcGxhY2VkIGJ5IGFuIEFtcGxpZnkgQVBJIGNhbGwsIHNvIHdlJ3JlIG92ZXJyaWRpbmcKICAgICAgLy8gc3VibWl0UmVxdWVzdCBoZXJlIGluIG9yZGVyIHRvIHNraXAgRHJvcHpvbmUncyB4aHIgcmVxdWVzdC4KICAgIH07CgogICAgdGhpcy5kcm9wem9uZS5vbignc2VuZGluZ211bHRpcGxlJywgZnVuY3Rpb24oZmlsZSwgeGhyLCBmb3JtRGF0YSkgewogICAgICB2bS4kZW1pdCgndmRyb3B6b25lLXNlbmRpbmctbXVsdGlwbGUnLCBmaWxlLCB4aHIsIGZvcm1EYXRhKQogICAgfSkKCiAgICB0aGlzLmRyb3B6b25lLm9uKCdjb21wbGV0ZScsIGZ1bmN0aW9uKGZpbGUpIHsKICAgICAgdm0uJGVtaXQoJ3Zkcm9wem9uZS1jb21wbGV0ZScsIGZpbGUpCiAgICB9KQoKICAgIHRoaXMuZHJvcHpvbmUub24oJ2NvbXBsZXRlbXVsdGlwbGUnLCBmdW5jdGlvbihmaWxlcykgewogICAgICB2bS4kZW1pdCgndmRyb3B6b25lLWNvbXBsZXRlLW11bHRpcGxlJywgZmlsZXMpCiAgICB9KQoKICAgIHRoaXMuZHJvcHpvbmUub24oJ2NhbmNlbGVkJywgZnVuY3Rpb24oZmlsZSkgewogICAgICB2bS4kZW1pdCgndmRyb3B6b25lLWNhbmNlbGVkJywgZmlsZSkKICAgIH0pCgogICAgdGhpcy5kcm9wem9uZS5vbignY2FuY2VsZWRtdWx0aXBsZScsIGZ1bmN0aW9uKGZpbGVzKSB7CiAgICAgIHZtLiRlbWl0KCd2ZHJvcHpvbmUtY2FuY2VsZWQtbXVsdGlwbGUnLCBmaWxlcykKICAgIH0pCgogICAgdGhpcy5kcm9wem9uZS5vbignbWF4ZmlsZXNyZWFjaGVkJywgZnVuY3Rpb24oZmlsZXMpIHsKICAgICAgdm0uJGVtaXQoJ3Zkcm9wem9uZS1tYXgtZmlsZXMtcmVhY2hlZCcsIGZpbGVzKQogICAgfSkKCiAgICB0aGlzLmRyb3B6b25lLm9uKCdtYXhmaWxlc2V4Y2VlZGVkJywgZnVuY3Rpb24oZmlsZSkgewogICAgICB2bS4kZW1pdCgndmRyb3B6b25lLW1heC1maWxlcy1leGNlZWRlZCcsIGZpbGUpCiAgICB9KQoKICAgIHRoaXMuZHJvcHpvbmUub24oJ3Byb2Nlc3NpbmcnLCBmdW5jdGlvbihmaWxlKSB7CiAgICAgIHZtLiRlbWl0KCd2ZHJvcHpvbmUtcHJvY2Vzc2luZycsIGZpbGUpCiAgICB9KQoKICAgIHRoaXMuZHJvcHpvbmUub24oJ3Byb2Nlc3NpbmdtdWx0aXBsZScsIGZ1bmN0aW9uKGZpbGVzKSB7CiAgICAgIHZtLiRlbWl0KCd2ZHJvcHpvbmUtcHJvY2Vzc2luZy1tdWx0aXBsZScsIGZpbGVzKQogICAgfSkKCiAgICB0aGlzLmRyb3B6b25lLm9uKCd1cGxvYWRwcm9ncmVzcycsIGZ1bmN0aW9uKGZpbGUsIHByb2dyZXNzLCBieXRlc1NlbnQpIHsKICAgICAgdm0uJGVtaXQoJ3Zkcm9wem9uZS11cGxvYWQtcHJvZ3Jlc3MnLCBmaWxlLCBwcm9ncmVzcywgYnl0ZXNTZW50KQogICAgfSkKCiAgICB0aGlzLmRyb3B6b25lLm9uKCd0b3RhbHVwbG9hZHByb2dyZXNzJywgZnVuY3Rpb24odG90YWx1cGxvYWRwcm9ncmVzcywgdG90YWxCeXRlcywgdG90YWxCeXRlc1NlbnQpIHsKICAgICAgdm0uJGVtaXQoJ3Zkcm9wem9uZS10b3RhbC11cGxvYWQtcHJvZ3Jlc3MnLCB0b3RhbHVwbG9hZHByb2dyZXNzLCB0b3RhbEJ5dGVzLCB0b3RhbEJ5dGVzU2VudCkKICAgIH0pCgogICAgdGhpcy5kcm9wem9uZS5vbigncmVzZXQnLCBmdW5jdGlvbigpIHsKICAgICAgdm0uJGVtaXQoJ3Zkcm9wem9uZS1yZXNldCcpCiAgICB9KQoKICAgIHRoaXMuZHJvcHpvbmUub24oJ3F1ZXVlY29tcGxldGUnLCBmdW5jdGlvbigpIHsKICAgICAgdm0uJGVtaXQoJ3Zkcm9wem9uZS1xdWV1ZS1jb21wbGV0ZScpCiAgICB9KQoKICAgIHRoaXMuZHJvcHpvbmUub24oJ2Ryb3AnLCBmdW5jdGlvbihldmVudCkgewogICAgICB2bS4kZW1pdCgndmRyb3B6b25lLWRyb3AnLCBldmVudCkKICAgIH0pCgogICAgdGhpcy5kcm9wem9uZS5vbignZHJhZ3N0YXJ0JywgZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgdm0uJGVtaXQoJ3Zkcm9wem9uZS1kcmFnLXN0YXJ0JywgZXZlbnQpCiAgICB9KQoKICAgIHRoaXMuZHJvcHpvbmUub24oJ2RyYWdlbmQnLCBmdW5jdGlvbihldmVudCkgewogICAgICB2bS4kZW1pdCgndmRyb3B6b25lLWRyYWctZW5kJywgZXZlbnQpCiAgICB9KQoKICAgIHRoaXMuZHJvcHpvbmUub24oJ2RyYWdlbnRlcicsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgIHZtLiRlbWl0KCd2ZHJvcHpvbmUtZHJhZy1lbnRlcicsIGV2ZW50KQogICAgfSkKCiAgICB0aGlzLmRyb3B6b25lLm9uKCdkcmFnb3ZlcicsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgIHZtLiRlbWl0KCd2ZHJvcHpvbmUtZHJhZy1vdmVyJywgZXZlbnQpCiAgICB9KQoKICAgIHRoaXMuZHJvcHpvbmUub24oJ2RyYWdsZWF2ZScsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgIHZtLiRlbWl0KCd2ZHJvcHpvbmUtZHJhZy1sZWF2ZScsIGV2ZW50KQogICAgfSkKCiAgICB2bS4kZW1pdCgndmRyb3B6b25lLW1vdW50ZWQnKQogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIGlmICh0aGlzLmRlc3Ryb3lEcm9wem9uZSkgdGhpcy5kcm9wem9uZS5kZXN0cm95KCkKICB9LAogIG1ldGhvZHM6IHsKICAgIG1hbnVhbGx5QWRkRmlsZTogZnVuY3Rpb24oZmlsZSwgZmlsZVVybCkgewogICAgICBmaWxlLm1hbnVhbGx5QWRkZWQgPSB0cnVlCiAgICAgIHRoaXMuZHJvcHpvbmUuZW1pdCgiYWRkZWRmaWxlIiwgZmlsZSkKICAgICAgbGV0IGNvbnRhaW5zSW1hZ2VGaWxlVHlwZSA9IGZhbHNlCiAgICAgIGlmIChmaWxlVXJsLmluZGV4T2YoJy5zdmcnKSA+IC0xIHx8IGZpbGVVcmwuaW5kZXhPZignLnBuZycpID4gLTEgfHwgZmlsZVVybC5pbmRleE9mKCcuanBnJykgPiAtMSB8fCBmaWxlVXJsLmluZGV4T2YoJy5qcGVnJykgPiAtMSB8fCBmaWxlVXJsLmluZGV4T2YoJy5naWYnKSA+IC0xKSBjb250YWluc0ltYWdlRmlsZVR5cGUgPSB0cnVlCiAgICAgIGlmICh0aGlzLmRyb3B6b25lLm9wdGlvbnMuY3JlYXRlSW1hZ2VUaHVtYm5haWxzICYmIGNvbnRhaW5zSW1hZ2VGaWxlVHlwZSAmJiBmaWxlLnNpemUgPD0gdGhpcy5kcm9wem9uZS5vcHRpb25zLm1heFRodW1ibmFpbEZpbGVzaXplICogMTAyNCAqIDEwMjQpIHsKICAgICAgICBmaWxlVXJsICYmIHRoaXMuZHJvcHpvbmUuZW1pdCgidGh1bWJuYWlsIiwgZmlsZSwgZmlsZVVybCk7CgogICAgICAgIHZhciB0aHVtYm5haWxzID0gZmlsZS5wcmV2aWV3RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1kei10aHVtYm5haWxdJyk7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aHVtYm5haWxzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aHVtYm5haWxzW2ldLnN0eWxlLndpZHRoID0gdGhpcy5kcm9wem9uZVNldHRpbmdzLnRodW1ibmFpbFdpZHRoICsgJ3B4JzsKICAgICAgICAgIHRodW1ibmFpbHNbaV0uc3R5bGUuaGVpZ2h0ID0gdGhpcy5kcm9wem9uZVNldHRpbmdzLnRodW1ibmFpbEhlaWdodCArICdweCc7CiAgICAgICAgICB0aHVtYm5haWxzW2ldLnN0eWxlWydvYmplY3QtZml0J10gPSAnY29udGFpbic7CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuZHJvcHpvbmUuZW1pdCgiY29tcGxldGUiLCBmaWxlKQogICAgICBpZiAodGhpcy5kcm9wem9uZS5vcHRpb25zLm1heEZpbGVzKSB0aGlzLmRyb3B6b25lLm9wdGlvbnMubWF4RmlsZXMtLQogICAgICB0aGlzLmRyb3B6b25lLmZpbGVzLnB1c2goZmlsZSkKICAgICAgdGhpcy4kZW1pdCgndmRyb3B6b25lLWZpbGUtYWRkZWQtbWFudWFsbHknLCBmaWxlKQogICAgfSwKICAgIHNldE9wdGlvbjogZnVuY3Rpb24ob3B0aW9uLCB2YWx1ZSkgewogICAgICB0aGlzLmRyb3B6b25lLm9wdGlvbnNbb3B0aW9uXSA9IHZhbHVlCiAgICB9LAogICAgcmVtb3ZlQWxsRmlsZXM6IGZ1bmN0aW9uKGJvb2wpIHsKICAgICAgdGhpcy5kcm9wem9uZS5yZW1vdmVBbGxGaWxlcyhib29sKQogICAgfSwKICAgIHByb2Nlc3NRdWV1ZTogZnVuY3Rpb24oKSB7CiAgICAgIGNvbnN0IHZtID0gdGhpczsKICAgICAgbGV0IGRyb3B6b25lRWxlID0gdGhpcy5kcm9wem9uZTsKICAgICAgdGhpcy4kZW1pdCgndmRyb3B6b25lLXNlbmRpbmcnKQogICAgICBpZiAodGhpcy5pc1MzICYmICF0aGlzLndhc1F1ZXVlQXV0b1Byb2Nlc3MpIHsKICAgICAgICB0aGlzLmdldFF1ZXVlZEZpbGVzKCkuZm9yRWFjaCgoZmlsZSkgPT4gewogICAgICAgICAgdGhpcy5nZXRTaWduZWRBbmRVcGxvYWRUb1MzKGZpbGUpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZHJvcHpvbmUucHJvY2Vzc1F1ZXVlKCk7CiAgICAgIH0KICAgICAgdGhpcy5kcm9wem9uZS5vbigic3VjY2VzcyIsIGZ1bmN0aW9uKGZpbGUpIHsKICAgICAgICBkcm9wem9uZUVsZS5vcHRpb25zLmF1dG9Qcm9jZXNzUXVldWUgPSB0cnVlCiAgICAgICAgdm0uJGVtaXQoJ3N1Y2Nlc3MnLCBmaWxlKQogICAgICB9KTsKICAgICAgdGhpcy5kcm9wem9uZS5vbigncXVldWVjb21wbGV0ZScsIGZ1bmN0aW9uKCkgewogICAgICAgIGRyb3B6b25lRWxlLm9wdGlvbnMuYXV0b1Byb2Nlc3NRdWV1ZSA9IGZhbHNlCiAgICAgICAgdm0uJGVtaXQoJ3Zkcm9wem9uZS1xdWV1ZS1jb21wbGV0ZScpCiAgICAgIH0pOwogICAgICB0aGlzLmRyb3B6b25lLm9uKCdyZW1vdmVkZmlsZScsIGZ1bmN0aW9uKGZpbGUpIHsKICAgICAgICBpZiAodGhpcy5nZXRGaWxlc1dpdGhTdGF0dXMoKS5sZW5ndGggPT09IDApIHsKICAgICAgICAgIHZtLiRlbWl0KCd2ZHJvcHpvbmUtcXVldWUtY29tcGxldGUnKQogICAgICAgIH0KICAgICAgICB2bS4kQW1wbGlmeS5TdG9yYWdlLmNhbmNlbChmaWxlLnNlbmRfcHJvbWlzZSwgIlRoZSB1c2VyIGNhbmNlbGVkIHRoaXMgdXBsb2FkLiIpOwogICAgICB9KTsKCiAgICB9LAogICAgaW5pdDogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLmRyb3B6b25lLmluaXQoKTsKICAgIH0sCiAgICBkZXN0cm95OiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuZHJvcHpvbmUuZGVzdHJveSgpOwogICAgfSwKICAgIHVwZGF0ZVRvdGFsVXBsb2FkUHJvZ3Jlc3M6IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy5kcm9wem9uZS51cGRhdGVUb3RhbFVwbG9hZFByb2dyZXNzKCk7CiAgICB9LAogICAgZ2V0RmFsbGJhY2tGb3JtOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuZHJvcHpvbmUuZ2V0RmFsbGJhY2tGb3JtKCk7CiAgICB9LAogICAgZ2V0RXhpc3RpbmdGYWxsYmFjazogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLmRyb3B6b25lLmdldEV4aXN0aW5nRmFsbGJhY2soKTsKICAgIH0sCiAgICBzZXR1cEV2ZW50TGlzdGVuZXJzOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuZHJvcHpvbmUuc2V0dXBFdmVudExpc3RlbmVycygpOwogICAgfSwKICAgIHJlbW92ZUV2ZW50TGlzdGVuZXJzOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuZHJvcHpvbmUucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTsKICAgIH0sCiAgICBkaXNhYmxlOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuZHJvcHpvbmUuZGlzYWJsZSgpOwogICAgfSwKICAgIGVuYWJsZTogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLmRyb3B6b25lLmVuYWJsZSgpOwogICAgfSwKICAgIGZpbGVzaXplOiBmdW5jdGlvbihzaXplKSB7CiAgICAgIHJldHVybiB0aGlzLmRyb3B6b25lLmZpbGVzaXplKHNpemUpOwogICAgfSwKICAgIGFjY2VwdDogZnVuY3Rpb24oZmlsZSwgZG9uZSkgewogICAgICByZXR1cm4gdGhpcy5kcm9wem9uZS5hY2NlcHQoZmlsZSwgZG9uZSk7CiAgICB9LAogICAgYWRkRmlsZTogZnVuY3Rpb24oZmlsZSkgewogICAgICByZXR1cm4gdGhpcy5kcm9wem9uZS5hZGRGaWxlKGZpbGUpOwogICAgfSwKICAgIHJlbW92ZUZpbGU6IGZ1bmN0aW9uKGZpbGUpIHsKICAgICAgdGhpcy5kcm9wem9uZS5yZW1vdmVGaWxlKGZpbGUpCiAgICB9LAogICAgZ2V0QWNjZXB0ZWRGaWxlczogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLmRyb3B6b25lLmdldEFjY2VwdGVkRmlsZXMoKQogICAgfSwKICAgIGdldFJlamVjdGVkRmlsZXM6IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy5kcm9wem9uZS5nZXRSZWplY3RlZEZpbGVzKCkKICAgIH0sCiAgICBnZXRGaWxlc1dpdGhTdGF0dXM6IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy5kcm9wem9uZS5nZXRGaWxlc1dpdGhTdGF0dXMoKQogICAgfSwKICAgIGdldFF1ZXVlZEZpbGVzOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuZHJvcHpvbmUuZ2V0UXVldWVkRmlsZXMoKQogICAgfSwKICAgIGdldFVwbG9hZGluZ0ZpbGVzOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuZHJvcHpvbmUuZ2V0VXBsb2FkaW5nRmlsZXMoKQogICAgfSwKICAgIGdldEFkZGVkRmlsZXM6IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy5kcm9wem9uZS5nZXRBZGRlZEZpbGVzKCkKICAgIH0sCiAgICBnZXRBY3RpdmVGaWxlczogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLmRyb3B6b25lLmdldEFjdGl2ZUZpbGVzKCkKICAgIH0sCiAgICBhc3luYyBnZXRTaWduZWRBbmRVcGxvYWRUb1MzKGZpbGUpIHsKICAgICAgbGV0IGtleSA9ICd1cGxvYWQvJyArIGZpbGUubmFtZQogICAgICBsZXQgdm0gPSB0aGlzCiAgICAgIHRoaXMuZHJvcHpvbmUuZW1pdCgicHJvY2Vzc2luZyIsIGZpbGUpOwogICAgICBmaWxlLnN0YXR1cyA9IHRoaXMuZHJvcHpvbmUuVVBMT0FESU5HOwogICAgICBmaWxlLnByb2Nlc3NpbmcgPSB0cnVlOwogICAgICBsZXQgcHJvbWlzZSA9IG51bGw7CiAgICAgIHRyeSB7CiAgICAgICAgcHJvbWlzZSA9IHRoaXMuJEFtcGxpZnkuU3RvcmFnZS5wdXQoa2V5LCBmaWxlLCB7CiAgICAgICAgICBsZXZlbDogJ3B1YmxpYycsCiAgICAgICAgICAvLyBOb3QgYWN0dWFsbHkgcHVibGljIGluIHRoZSBTMyBzZW5zZSwgdGhpcyBpcyBqdXN0IGFuIEFtcGxpZnkgY29uc3RydWN0LgogICAgICAgICAgLy8gUHVibGljIG1ha2VzIHRoaXMgZmlsZSBhY2Nlc3NpYmxlIGJ5IGFsbCB0aGUgYXV0aGVudGljYXRlZCB1c2VycyBvZiB0aGlzCiAgICAgICAgICAvLyBhcHAuIEZpbGVzIGFyZSBzdG9yZWQgdW5kZXIgdGhlIHB1YmxpYy8gcGF0aCBvZiB0aGUgZGF0YXBsYW5lIFMzIGJ1Y2tldC4KICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2socHJvZ3Jlc3MpIHsKICAgICAgICAgICAgdm0uaXNVcGxvYWRpbmcgPSB0cnVlCiAgICAgICAgICAgIHZtLnVwbG9hZFZhbHVlID0gMAogICAgICAgICAgICBjb25zdCB0b3RhbFVwbG9hZFByb2dyZXNzID0gKHByb2dyZXNzLmxvYWRlZCAvIHByb2dyZXNzLnRvdGFsKSAqIDEwMAogICAgICAgICAgICBjb25zdCBieXRlc1NlbnQgPSBwcm9ncmVzcy5sb2FkZWQKICAgICAgICAgICAgZmlsZS5zZW5kX3Byb21pc2UgPSBwcm9taXNlCiAgICAgICAgICAgIHZtLmRyb3B6b25lLmVtaXQoCiAgICAgICAgICAgICAgICAidXBsb2FkcHJvZ3Jlc3MiLAogICAgICAgICAgICAgICAgZmlsZSwKICAgICAgICAgICAgICAgIHRvdGFsVXBsb2FkUHJvZ3Jlc3MsCiAgICAgICAgICAgICAgICBieXRlc1NlbnQKICAgICAgICAgICAgKTsKICAgICAgICAgIH0sCiAgICAgICAgfSkKICAgICAgICBhd2FpdCBwcm9taXNlOwogICAgICAgIHByb21pc2UudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIC8vIEFtcGxpZnkgdXBsb2FkIHJldHVybnMgYSB7a2V5OiBTMyBPYmplY3Qga2V5fSBvYmplY3Qgb24gc3VjY2Vzcy4KICAgICAgICAgIC8vIFdlIHVzZSB0aGF0IHRvIGRldGVybWluZSB3aGV0aGVyIHVwbG9hZCB3YXMgc3VjY2Vzc2Z1bDoKICAgICAgICAgIGlmIChyZXNwb25zZS5rZXkgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygidXBsb2FkIGNvbXBsZXRlIikKICAgICAgICAgICAgZmlsZS5zM19rZXkgPSAicHVibGljLyIrcmVzcG9uc2Uua2V5CiAgICAgICAgICAgIHZtLmRyb3B6b25lLmVtaXQoInN1Y2Nlc3MiLCBmaWxlKTsKICAgICAgICAgICAgdm0uZHJvcHpvbmUuZW1pdCgiY29tcGxldGUiLCBmaWxlKTsKICAgICAgICAgICAgdm0uZHJvcHpvbmUuZW1pdCgidmRyb3B6b25lLXMzLXVwbG9hZC1zdWNjZXNzIiwgInVwbG9hZCBzdWNjZXNzIik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2bS5kcm9wem9uZS5lbWl0KCd2ZHJvcHpvbmUtczMtdXBsb2FkLWVycm9yJywgInVwbG9hZCBlcnJvciIpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKCJFcnJvcjogIiArIGVycikKICAgICAgICAvLyBmaWxlLnN0YXR1cyA9IHZtLmRyb3B6b25lLlNVQ0NFU1M7CiAgICAgICAgdm0uaXNVcGxvYWRpbmcgPSBudWxsCiAgICAgICAgdm0udXBsb2FkVmFsdWUgPSBudWxsCiAgICAgICAgdm0uZmlsZSA9IG51bGwKICAgICAgfQogICAgfSwKICB9Cn0KCg=="},{"version":3,"sources":["vue-dropzone.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"vue-dropzone.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div\n    :id=\"id\"\n    ref=\"dropzoneElement\"\n    :class=\"{ 'vue-dropzone dropzone': includeStyling }\"\n  >\n    <div\n      v-if=\"useCustomSlot\"\n      class=\"dz-message\"\n    >\n      <slot>Drop files here to upload</slot>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Dropzone from 'dropzone' //eslint-disable-line\n\nDropzone.autoDiscover = false\n\nexport default {\n  props: {\n    id: {\n      type: String,\n      required: true,\n      default:'dropzone'\n    },\n    options: {\n      type: Object,\n      required: true\n    },\n    includeStyling: {\n      type: Boolean,\n      default: true,\n      required: false\n    },\n    awss3: {\n      type: Object,\n      required: false,\n      default: null\n    },\n    destroyDropzone: {\n      type: Boolean,\n      default: true,\n      required: false\n    },\n    duplicateCheck: {\n      type: Boolean,\n      default: false,\n      required: false\n    },\n    useCustomSlot: {\n      type: Boolean,\n      default: false,\n      required: false\n    }\n  },\n  data() {\n    return {\n      isS3: false,\n      isS3OverridesServerPropagation: false,\n      wasQueueAutoProcess: true,\n    }\n  },\n  computed: {\n    dropzoneSettings() {\n      let defaultValues = {\n        thumbnailWidth: 200,\n        thumbnailHeight: 200\n      }\n      Object.keys(this.options).forEach(function(key) {\n        defaultValues[key] = this.options[key]\n      }, this)\n      if (this.awss3 !== null) {\n        defaultValues['autoProcessQueue'] = false\n        this.isS3 = true //eslint-disable-line\n        this.isS3OverridesServerPropagation = (this.awss3.sendFileToServer === false)  //eslint-disable-line\n        if (this.options.autoProcessQueue !== undefined)\n          this.wasQueueAutoProcess = this.options.autoProcessQueue //eslint-disable-line\n\n        if (this.isS3OverridesServerPropagation) {\n          defaultValues['url'] = (files) => {\n            return files[0].s3Url;\n          }\n        }\n      }\n      return defaultValues\n    }\n  },\n  mounted () {\n    if (this.$isServer && this.hasBeenMounted) {\n      return\n    }\n    this.hasBeenMounted = true\n\n    this.dropzone = new Dropzone(this.$refs.dropzoneElement, this.dropzoneSettings)\n    let vm = this\n\n    this.dropzone.on('thumbnail', function(file, dataUrl) {\n      vm.$emit('vdropzone-thumbnail', file, dataUrl)\n    })\n\n    this.dropzone.on('addedfile', function(file) {\n      if (vm.duplicateCheck) {\n        if (this.files.length) {\n          var _i, _len;\n          for (_i = 0, _len = this.files.length; _i < _len - 1; _i++) // -1 to exclude current file\n            {\n                if(this.files[_i].name === file.name && this.files[_i].size === file.size && this.files[_i].lastModifiedDate.toString() === file.lastModifiedDate.toString())\n                {\n                    this.removeFile(file);\n                    vm.$emit('vdropzone-duplicate-file', file)\n                }\n            }\n        }\n      }\n\n      vm.$emit('vdropzone-file-added', file)\n      if (vm.isS3 && vm.wasQueueAutoProcess && ! file.manuallyAdded) {\n        vm.getSignedAndUploadToS3(file);\n      }\n    })\n\n    this.dropzone.on('addedfiles', function(files) {\n      vm.$emit('vdropzone-files-added', files)\n    })\n\n    this.dropzone.on('removedfile', function(file) {\n      vm.$emit('vdropzone-removed-file', file)\n      if (file.manuallyAdded && vm.dropzone.options.maxFiles !== null) vm.dropzone.options.maxFiles++\n    })\n\n    this.dropzone.on('success', function(file, response) {\n      vm.$emit('vdropzone-success', file, response)\n      if (vm.isS3) {\n        if(vm.isS3OverridesServerPropagation){\n          var xmlResponse = (new window.DOMParser()).parseFromString(response, \"text/xml\");\n          var s3ObjectLocation = xmlResponse.firstChild.children[0].innerHTML;\n          vm.$emit('vdropzone-s3-upload-success', s3ObjectLocation);\n        }\n          if (vm.wasQueueAutoProcess)\n            vm.setOption('autoProcessQueue', false);\n      }\n    })\n\n    this.dropzone.on('successmultiple', function(file, response) {\n      vm.$emit('vdropzone-success-multiple', file, response)\n    })\n\n    this.dropzone.on('error', function(file, message, xhr) {\n      vm.$emit('vdropzone-error', file, message, xhr)\n      if (this.isS3)\n        vm.$emit('vdropzone-s3-upload-error');\n    })\n\n    this.dropzone.on('errormultiple', function(files, message, xhr) {\n      vm.$emit('vdropzone-error-multiple', files, message, xhr)\n    })\n    delete this.dropzone['submitRequest'];\n    this.dropzone.submitRequest = function() {\n      // Dropzone's xhr formatted upload request has been\n      // replaced by an Amplify API call, so we're overriding\n      // submitRequest here in order to skip Dropzone's xhr request.\n    };\n\n    this.dropzone.on('sendingmultiple', function(file, xhr, formData) {\n      vm.$emit('vdropzone-sending-multiple', file, xhr, formData)\n    })\n\n    this.dropzone.on('complete', function(file) {\n      vm.$emit('vdropzone-complete', file)\n    })\n\n    this.dropzone.on('completemultiple', function(files) {\n      vm.$emit('vdropzone-complete-multiple', files)\n    })\n\n    this.dropzone.on('canceled', function(file) {\n      vm.$emit('vdropzone-canceled', file)\n    })\n\n    this.dropzone.on('canceledmultiple', function(files) {\n      vm.$emit('vdropzone-canceled-multiple', files)\n    })\n\n    this.dropzone.on('maxfilesreached', function(files) {\n      vm.$emit('vdropzone-max-files-reached', files)\n    })\n\n    this.dropzone.on('maxfilesexceeded', function(file) {\n      vm.$emit('vdropzone-max-files-exceeded', file)\n    })\n\n    this.dropzone.on('processing', function(file) {\n      vm.$emit('vdropzone-processing', file)\n    })\n\n    this.dropzone.on('processingmultiple', function(files) {\n      vm.$emit('vdropzone-processing-multiple', files)\n    })\n\n    this.dropzone.on('uploadprogress', function(file, progress, bytesSent) {\n      vm.$emit('vdropzone-upload-progress', file, progress, bytesSent)\n    })\n\n    this.dropzone.on('totaluploadprogress', function(totaluploadprogress, totalBytes, totalBytesSent) {\n      vm.$emit('vdropzone-total-upload-progress', totaluploadprogress, totalBytes, totalBytesSent)\n    })\n\n    this.dropzone.on('reset', function() {\n      vm.$emit('vdropzone-reset')\n    })\n\n    this.dropzone.on('queuecomplete', function() {\n      vm.$emit('vdropzone-queue-complete')\n    })\n\n    this.dropzone.on('drop', function(event) {\n      vm.$emit('vdropzone-drop', event)\n    })\n\n    this.dropzone.on('dragstart', function(event) {\n      vm.$emit('vdropzone-drag-start', event)\n    })\n\n    this.dropzone.on('dragend', function(event) {\n      vm.$emit('vdropzone-drag-end', event)\n    })\n\n    this.dropzone.on('dragenter', function(event) {\n      vm.$emit('vdropzone-drag-enter', event)\n    })\n\n    this.dropzone.on('dragover', function(event) {\n      vm.$emit('vdropzone-drag-over', event)\n    })\n\n    this.dropzone.on('dragleave', function(event) {\n      vm.$emit('vdropzone-drag-leave', event)\n    })\n\n    vm.$emit('vdropzone-mounted')\n  },\n  beforeDestroy() {\n    if (this.destroyDropzone) this.dropzone.destroy()\n  },\n  methods: {\n    manuallyAddFile: function(file, fileUrl) {\n      file.manuallyAdded = true\n      this.dropzone.emit(\"addedfile\", file)\n      let containsImageFileType = false\n      if (fileUrl.indexOf('.svg') > -1 || fileUrl.indexOf('.png') > -1 || fileUrl.indexOf('.jpg') > -1 || fileUrl.indexOf('.jpeg') > -1 || fileUrl.indexOf('.gif') > -1) containsImageFileType = true\n      if (this.dropzone.options.createImageThumbnails && containsImageFileType && file.size <= this.dropzone.options.maxThumbnailFilesize * 1024 * 1024) {\n        fileUrl && this.dropzone.emit(\"thumbnail\", file, fileUrl);\n\n        var thumbnails = file.previewElement.querySelectorAll('[data-dz-thumbnail]');\n        for (var i = 0; i < thumbnails.length; i++) {\n          thumbnails[i].style.width = this.dropzoneSettings.thumbnailWidth + 'px';\n          thumbnails[i].style.height = this.dropzoneSettings.thumbnailHeight + 'px';\n          thumbnails[i].style['object-fit'] = 'contain';\n        }\n      }\n      this.dropzone.emit(\"complete\", file)\n      if (this.dropzone.options.maxFiles) this.dropzone.options.maxFiles--\n      this.dropzone.files.push(file)\n      this.$emit('vdropzone-file-added-manually', file)\n    },\n    setOption: function(option, value) {\n      this.dropzone.options[option] = value\n    },\n    removeAllFiles: function(bool) {\n      this.dropzone.removeAllFiles(bool)\n    },\n    processQueue: function() {\n      const vm = this;\n      let dropzoneEle = this.dropzone;\n      this.$emit('vdropzone-sending')\n      if (this.isS3 && !this.wasQueueAutoProcess) {\n        this.getQueuedFiles().forEach((file) => {\n          this.getSignedAndUploadToS3(file);\n        });\n      } else {\n        this.dropzone.processQueue();\n      }\n      this.dropzone.on(\"success\", function(file) {\n        dropzoneEle.options.autoProcessQueue = true\n        vm.$emit('success', file)\n      });\n      this.dropzone.on('queuecomplete', function() {\n        dropzoneEle.options.autoProcessQueue = false\n        vm.$emit('vdropzone-queue-complete')\n      });\n      this.dropzone.on('removedfile', function(file) {\n        if (this.getFilesWithStatus().length === 0) {\n          vm.$emit('vdropzone-queue-complete')\n        }\n        vm.$Amplify.Storage.cancel(file.send_promise, \"The user canceled this upload.\");\n      });\n\n    },\n    init: function() {\n      return this.dropzone.init();\n    },\n    destroy: function() {\n      return this.dropzone.destroy();\n    },\n    updateTotalUploadProgress: function() {\n      return this.dropzone.updateTotalUploadProgress();\n    },\n    getFallbackForm: function() {\n      return this.dropzone.getFallbackForm();\n    },\n    getExistingFallback: function() {\n      return this.dropzone.getExistingFallback();\n    },\n    setupEventListeners: function() {\n      return this.dropzone.setupEventListeners();\n    },\n    removeEventListeners: function() {\n      return this.dropzone.removeEventListeners();\n    },\n    disable: function() {\n      return this.dropzone.disable();\n    },\n    enable: function() {\n      return this.dropzone.enable();\n    },\n    filesize: function(size) {\n      return this.dropzone.filesize(size);\n    },\n    accept: function(file, done) {\n      return this.dropzone.accept(file, done);\n    },\n    addFile: function(file) {\n      return this.dropzone.addFile(file);\n    },\n    removeFile: function(file) {\n      this.dropzone.removeFile(file)\n    },\n    getAcceptedFiles: function() {\n      return this.dropzone.getAcceptedFiles()\n    },\n    getRejectedFiles: function() {\n      return this.dropzone.getRejectedFiles()\n    },\n    getFilesWithStatus: function() {\n      return this.dropzone.getFilesWithStatus()\n    },\n    getQueuedFiles: function() {\n      return this.dropzone.getQueuedFiles()\n    },\n    getUploadingFiles: function() {\n      return this.dropzone.getUploadingFiles()\n    },\n    getAddedFiles: function() {\n      return this.dropzone.getAddedFiles()\n    },\n    getActiveFiles: function() {\n      return this.dropzone.getActiveFiles()\n    },\n    async getSignedAndUploadToS3(file) {\n      let key = 'upload/' + file.name\n      let vm = this\n      this.dropzone.emit(\"processing\", file);\n      file.status = this.dropzone.UPLOADING;\n      file.processing = true;\n      let promise = null;\n      try {\n        promise = this.$Amplify.Storage.put(key, file, {\n          level: 'public',\n          // Not actually public in the S3 sense, this is just an Amplify construct.\n          // Public makes this file accessible by all the authenticated users of this\n          // app. Files are stored under the public/ path of the dataplane S3 bucket.\n          progressCallback(progress) {\n            vm.isUploading = true\n            vm.uploadValue = 0\n            const totalUploadProgress = (progress.loaded / progress.total) * 100\n            const bytesSent = progress.loaded\n            file.send_promise = promise\n            vm.dropzone.emit(\n                \"uploadprogress\",\n                file,\n                totalUploadProgress,\n                bytesSent\n            );\n          },\n        })\n        await promise;\n        promise.then((response) => {\n          // Amplify upload returns a {key: S3 Object key} object on success.\n          // We use that to determine whether upload was successful:\n          if (response.key !== undefined) {\n            console.log(\"upload complete\")\n            file.s3_key = \"public/\"+response.key\n            vm.dropzone.emit(\"success\", file);\n            vm.dropzone.emit(\"complete\", file);\n            vm.dropzone.emit(\"vdropzone-s3-upload-success\", \"upload success\");\n          } else {\n            vm.dropzone.emit('vdropzone-s3-upload-error', \"upload error\");\n          }\n        })\n      } catch (err) {\n        console.log(\"Error: \" + err)\n        // file.status = vm.dropzone.SUCCESS;\n        vm.isUploading = null\n        vm.uploadValue = null\n        vm.file = null\n      }\n    },\n  }\n}\n\n</script>\n\n<style>\n  .vue-dropzone {\n    border: 2px solid #E5E5E5;\n    font-family: 'Arial', sans-serif;\n    letter-spacing: 0.2px;\n    color: #777;\n    transition: .2s linear;\n   }\n\n  .vue-dropzone:hover {\n    background-color: #F6F6F6;\n  }\n\n  .vue-dropzone > i {\n    color: #CCC;\n  }\n\n  .vue-dropzone > .dz-preview .dz-image {\n    border-radius: 0;\n    width: 100%;\n    height: 100%;\n  }\n\n  .vue-dropzone > .dz-preview .dz-image img:not([src]) {\n    width: 200px;\n    height: 200px;\n  }\n\n  .vue-dropzone > .dz-preview .dz-image:hover img {\n    transform: none;\n    -webkit-filter: none;\n  }\n\n  .vue-dropzone > .dz-preview .dz-details {\n    bottom: 0;\n    top: 0;\n    color: white;\n    background-color: rgba(33, 150, 243, 0.8);\n    transition: opacity .2s linear;\n    text-align: left;\n  }\n\n  .vue-dropzone > .dz-preview .dz-details .dz-filename {\n    overflow: hidden;\n  }\n\n  .vue-dropzone > .dz-preview .dz-details .dz-filename span, .vue-dropzone > .dz-preview .dz-details .dz-size span {\n    background-color: transparent;\n  }\n\n  .vue-dropzone > .dz-preview .dz-details .dz-filename:not(:hover) span {\n    border: none;\n  }\n\n  .vue-dropzone > .dz-preview .dz-details .dz-filename:hover span {\n    background-color: transparent;\n    border: none;\n  }\n\n  .vue-dropzone > .dz-preview .dz-progress .dz-upload {\n    background: #cccccc;\n  }\n\n  .vue-dropzone > .dz-preview .dz-remove  {\n    position: absolute;\n    z-index: 30;\n    color: white;\n    margin-left: 15px;\n    padding: 10px;\n    top: inherit;\n    bottom: 15px;\n    border: 2px white solid;\n    text-decoration: none;\n    text-transform: uppercase;\n    font-size: 0.8rem;\n    font-weight: 800;\n    letter-spacing: 1.1px;\n    opacity: 0;\n  }\n\n  .vue-dropzone > .dz-preview:hover .dz-remove {\n    opacity: 1;\n  }\n\n  .vue-dropzone > .dz-preview .dz-success-mark, .vue-dropzone > .dz-preview .dz-error-mark {\n    margin-left: auto;\n    margin-top: auto;\n    width: 100%;\n    top: 35%;\n    left: 0;\n  }\n\n  .vue-dropzone > .dz-preview .dz-success-mark svg, .vue-dropzone > .dz-preview .dz-error-mark svg {\n    margin-left: auto;\n    margin-right: auto;\n  }\n\n  .vue-dropzone > .dz-preview .dz-error-message {\n    margin-left: auto;\n    margin-right: auto;\n    left: 0;\n    width: 100%;\n    text-align: center;\n  }\n\n  .vue-dropzone > .dz-preview .dz-error-message:after {\n    display: none;\n  }\n\n</style>\n"]}]}